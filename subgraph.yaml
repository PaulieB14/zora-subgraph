specVersion: 1.3.0
schema:
  file: ./schema.graphql
indexerHints:
  prune: auto  # Best Practice 1: Improve Query Speed with Pruning
dataSources:
  - kind: ethereum/contract
    name: ZoraFactory
    network: base
    source:
      address: "0x777777751622c0d3258f214F9DF38E35BF45baF3"  # Real Zora Factory on Base
      abi: ZoraFactory
      startBlock: 26602741
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Post
        - User
        - CreatorCoin
        - ContentCoin
        - Mint
        - Transfer
        - Swap
        - Reward
      abis:
        - name: ZoraFactory
          file: ./abis/ZoraFactory.json
        - name: ZORAToken
          file: ./abis/ZORAToken.json
        - name: ContentCoin
          file: ./abis/ContentCoin.json
        - name: CreatorCoin
          file: ./abis/CreatorCoin.json
      eventHandlers:
        - event: CoinCreatedV4(indexed address,indexed address,indexed address,address,string,string,string,address,(address,address,uint24,int24,address),bytes32,string)
          handler: handleCoinCreatedV4
      file: ./src/mapping.ts
templates:
  - kind: ethereum/contract
    name: ContentCoinTemplate
    network: base
    source:
      abi: ContentCoin
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Post
        - User
        - ContentCoin
        - Mint
        - Transfer
      abis:
        - name: ContentCoin
          file: ./abis/ContentCoin.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleContentCoinTransfer
        - event: Mint(indexed address,uint256)
          handler: handleContentCoinMint
      file: ./src/mapping.ts
  - kind: ethereum/contract
    name: CreatorCoinTemplate
    network: base
    source:
      abi: CreatorCoin
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - CreatorCoin
        - Transfer
        - Swap
        - Reward
      abis:
        - name: CreatorCoin
          file: ./abis/CreatorCoin.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleCreatorCoinTransfer
      file: ./src/mapping.ts
