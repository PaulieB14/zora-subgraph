specVersion: 1.3.0
schema:
  file: ./schema.graphql
indexerHints:
  prune: auto  # Best Practice 1: Improve Query Speed with Pruning
dataSources:
  - kind: ethereum/contract
    name: ZoraFactoryImpl
    network: base
    source:
      address: "0x777777751622c0d3258f214F9DF38E35BF45baF3"  # Real Zora Factory on Base
      abi: ZoraFactoryImpl
      startBlock: 10000000  # Start from recent Base block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Post
        - User
        - CreatorCoin
        - ContentCoin
        - Mint
        - Transfer
        - Swap
        - Reward
        - PostMetrics
      abis:
        - name: ZoraFactoryImpl
          file: ./abis/ZoraFactoryImpl.json
        - name: ContentCoin
          file: ./abis/ContentCoin.json
        - name: CreatorCoin
          file: ./abis/CreatorCoin.json
      eventHandlers:
        - event: CoinCreated(indexed address,indexed address,indexed address,indexed address,string,string,string,address,address,string)
          handler: handleCoinCreated
      file: ./src/mapping.ts
  - kind: ethereum/contract
    name: ContentCoin
    network: base
    source:
      abi: ContentCoin
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Post
        - User
        - Mint
        - Transfer
        - PostMetrics
      abis:
        - name: ContentCoin
          file: ./abis/ContentCoin.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Mint(indexed address,uint256)
          handler: handleMint
      file: ./src/mapping.ts
  - kind: ethereum/contract
    name: CreatorCoin
    network: base
    source:
      abi: CreatorCoin
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - CreatorCoin
        - User
        - Transfer
        - Reward
      abis:
        - name: CreatorCoin
          file: ./abis/CreatorCoin.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleCreatorCoinTransfer
      file: ./src/mapping.ts
