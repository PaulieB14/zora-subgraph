(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.KuboRpcClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var KuboRpcClient=(()=>{var Mm=Object.create;var Jn=Object.defineProperty;var Fm=Object.getOwnPropertyDescriptor;var Vm=Object.getOwnPropertyNames;var Hm=Object.getPrototypeOf,jm=Object.prototype.hasOwnProperty;var Mt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fe=(e,t)=>{for(var r in t)Jn(e,r,{get:t[r],enumerable:!0})},Gc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Vm(t))!jm.call(e,o)&&o!==r&&Jn(e,o,{get:()=>t[o],enumerable:!(n=Fm(t,o))||n.enumerable});return e};var Ft=(e,t,r)=>(r=e!=null?Mm(Hm(e)):{},Gc(t||!e||!e.__esModule?Jn(r,"default",{value:e,enumerable:!0}):r,e)),qm=e=>Gc(Jn({},"__esModule",{value:!0}),e);var Il=Mt(($8,vl)=>{function rx(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}vl.exports=rx});var Cn=Mt((j8,Dl)=>{"use strict";function _l(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function nx(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return _l(e,r)}catch{r.message=e.message,r.stack=e.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),_l(new o,r)}}Dl.exports=nx});var nh=Mt((IB,rh)=>{"use strict";rh.exports=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}});var fh=Mt((ah,ch)=>{"use strict";var ms=nh(),{hasOwnProperty:sh}=Object.prototype,{propertyIsEnumerable:n1}=Object,Wr=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),o1=ah,oh={concatArrays:!1,ignoreUndefined:!1},ys=e=>{let t=[];for(let r in e)sh.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(e);for(let n of r)n1.call(e,n)&&t.push(n)}return t};function Zr(e){return Array.isArray(e)?s1(e):ms(e)?i1(e):e}function s1(e){let t=e.slice(0,0);return ys(e).forEach(r=>{Wr(t,r,Zr(e[r]))}),t}function i1(e){let t=Object.getPrototypeOf(e)===null?Object.create(null):{};return ys(e).forEach(r=>{Wr(t,r,Zr(e[r]))}),t}var ih=(e,t,r,n)=>(r.forEach(o=>{typeof t[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Wr(e,o,Cc(e[o],t[o],n)):Wr(e,o,Zr(t[o])))}),e),a1=(e,t,r)=>{let n=e.slice(0,0),o=0;return[e,t].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)sh.call(s,a)&&(i.push(String(a)),s===e?Wr(n,o++,s[a]):Wr(n,o++,Zr(s[a])));n=ih(n,s,ys(s).filter(a=>!i.includes(a)),r)}),n};function Cc(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?a1(e,t,r):!ms(t)||!ms(e)?Zr(t):ih(e,t,ys(t),r)}ch.exports=function(...e){let t=Cc(Zr(oh),this!==o1&&this||{},oh),r={_:{}};for(let n of e)if(n!==void 0){if(!ms(n))throw new TypeError("`"+n+"` is not an Option Object");r=Cc(r,{_:n},t)}return r._}});var Tc=Mt((DB,gh)=>{"use strict";var f1=typeof navigator<"u"&&navigator.product==="ReactNative";function u1(){return f1?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var Wn=self.URL,yh=u1(),Bc=class{constructor(t="",r=yh){this.super=new Wn(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return Wn.createObjectURL(t)}static revokeObjectURL(t){Wn.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function l1(e){if(typeof e=="string")return new Wn(e).toString();if(!(e instanceof Wn)){let t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",f=e.path||u+a;return`${o}${t||r}${s||i+n}${f}${c}`}}gh.exports={URLWithLegacySupport:Bc,URLSearchParams:self.URLSearchParams,defaultBase:yh,format:l1}});var bh=Mt((UB,xh)=>{"use strict";var{URLWithLegacySupport:wh,format:d1}=Tc();xh.exports=(e,t={},r={},n)=>{let o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let s;try{s=new wh(e)}catch{s={}}let i=Object.assign({},t,{protocol:o||s.protocol,host:t.host||s.host});return new wh(e,d1(i)).toString()}});var Sh=Mt((NB,Eh)=>{"use strict";var{URLWithLegacySupport:p1,format:h1,URLSearchParams:m1,defaultBase:y1}=Tc(),g1=bh();Eh.exports={URL:p1,URLSearchParams:m1,format:h1,relative:g1,defaultBase:y1}});var Z1={};fe(Z1,{CID:()=>A,RoutingEventTypes:()=>wc,RoutingMessageType:()=>xc,create:()=>G1,createBitswap:()=>lc,createBlock:()=>dc,createBootstrap:()=>pc,createConfig:()=>hc,createDAG:()=>gc,createDHT:()=>bc,createDiag:()=>Ec,createFiles:()=>Ac,createKey:()=>vc,createKuboRPCClient:()=>G1,createLog:()=>kc,createName:()=>Rc,createObject:()=>Lc,createPin:()=>Oc,createPubsub:()=>Kc,createRefs:()=>$c,createRepo:()=>Mc,createRouting:()=>Fc,createStats:()=>Vc,createSwarm:()=>Hc,multiaddr:()=>J,readURLContent:()=>$m,urlSource:()=>W1});var Ls={};fe(Ls,{base10:()=>Jm});var X1=new Uint8Array(0);function Wc(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function ze(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Zc(e){return new TextEncoder().encode(e)}function Yc(e){return new TextDecoder().decode(e)}function zm(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var I=0,S=0,m=0,B=h.length;m!==B&&h[m]===0;)m++,I++;for(var x=(B-m)*f+1>>>0,T=new Uint8Array(x);m!==B;){for(var k=h[m],$=0,M=x-1;(k!==0||$<S)&&M!==-1;M--,$++)k+=256*T[M]>>>0,T[M]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");S=$,m++}for(var v=x-S;v!==x&&T[v]===0;)v++;for(var C=c.repeat(I);v<x;++v)C+=e.charAt(T[v]);return C}function y(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var I=0;if(h[I]!==" "){for(var S=0,m=0;h[I]===c;)S++,I++;for(var B=(h.length-I)*u+1>>>0,x=new Uint8Array(B);h[I];){var T=r[h.charCodeAt(I)];if(T===255)return;for(var k=0,$=B-1;(T!==0||k<m)&&$!==-1;$--,k++)T+=a*x[$]>>>0,x[$]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");m=k,I++}if(h[I]!==" "){for(var M=B-m;M!==B&&x[M]===0;)M++;for(var v=new Uint8Array(S+(B-M)),C=S;M!==B;)v[C++]=x[M++];return v}}}function P(h){var I=y(h);if(I)return I;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:y,decode:P}}var Gm=zm,Wm=Gm,Jc=Wm;var Us=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ns=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){this.name=t,this.prefix=r;let o=r.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Qc(this,t)}},ks=class{decoders;constructor(t){this.decoders=t}or(t){return Qc(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Qc(e,t){return new ks({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var Rs=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Us(t,r,n),this.decoder=new Ns(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function cr({name:e,prefix:t,encode:r,decode:n}){return new Rs(e,t,r,n)}function Ct({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=Jc(r,e);return cr({prefix:t,name:e,encode:n,decode:s=>ze(o(s))})}function Zm(e,t,r,n){let o=e.length;for(;e[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),i=0,a=0,c=0;for(let u=0;u<o;++u){let f=t[e[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|f,i+=r,i>=8&&(i-=8,s[c++]=255&a>>i)}if(i>=r||(255&a<<8-i)!==0)throw new SyntaxError("Unexpected end of data");return s}function Ym(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i!==0&&(s+=t[o&a<<r-i]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function Xm(e){let t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}function ie({name:e,prefix:t,bitsPerChar:r,alphabet:n}){let o=Xm(n);return cr({prefix:t,name:e,encode(s){return Ym(s,n,r)},decode(s){return Zm(s,o,r,e)}})}var Jm=Ct({prefix:"9",name:"base10",alphabet:"0123456789"});var Os={};fe(Os,{base16:()=>Qm,base16upper:()=>e0});var Qm=ie({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),e0=ie({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ks={};fe(Ks,{base2:()=>t0});var t0=ie({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $s={};fe($s,{base256emoji:()=>i0});var ef=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),r0=ef.reduce((e,t,r)=>(e[r]=t,e),[]),n0=ef.reduce((e,t,r)=>{let n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function o0(e){return e.reduce((t,r)=>(t+=r0[r],t),"")}function s0(e){let t=[];for(let r of e){let n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);let o=n0[n];if(o==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(o)}return new Uint8Array(t)}var i0=cr({prefix:"\u{1F680}",name:"base256emoji",encode:o0,decode:s0});var Ms={};fe(Ms,{base32:()=>nt,base32hex:()=>u0,base32hexpad:()=>d0,base32hexpadupper:()=>p0,base32hexupper:()=>l0,base32pad:()=>c0,base32padupper:()=>f0,base32upper:()=>a0,base32z:()=>h0});var nt=ie({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),a0=ie({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),c0=ie({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),f0=ie({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u0=ie({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),l0=ie({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),d0=ie({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),p0=ie({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),h0=ie({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Fs={};fe(Fs,{base36:()=>tn,base36upper:()=>m0});var tn=Ct({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),m0=Ct({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Vs={};fe(Vs,{base58btc:()=>Q,base58flickr:()=>y0});var Q=Ct({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),y0=Ct({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Hs={};fe(Hs,{base64:()=>fr,base64pad:()=>g0,base64url:()=>Vt,base64urlpad:()=>w0});var fr=ie({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),g0=ie({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Vt=ie({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),w0=ie({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var js={};fe(js,{base8:()=>x0});var x0=ie({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var qs={};fe(qs,{identity:()=>b0});var b0=cr({prefix:"\0",name:"identity",encode:e=>Yc(e),decode:e=>Zc(e)});var zs={};fe(zs,{code:()=>v0,decode:()=>C0,encode:()=>I0,name:()=>A0});var E0=new TextEncoder,S0=new TextDecoder,A0="json",v0=512;function I0(e){return E0.encode(JSON.stringify(e))}function C0(e){return JSON.parse(S0.decode(e))}var Gs={};fe(Gs,{code:()=>B0,decode:()=>_0,encode:()=>T0,name:()=>P0});var P0="raw",B0=85;function T0(e){return ze(e)}function _0(e){return ze(e)}var Zs={};fe(Zs,{identity:()=>Be});var D0=nf,tf=128,U0=127,N0=~U0,k0=Math.pow(2,31);function nf(e,t,r){t=t||[],r=r||0;for(var n=r;e>=k0;)t[r++]=e&255|tf,e/=128;for(;e&N0;)t[r++]=e&255|tf,e>>>=7;return t[r]=e|0,nf.bytes=r-n+1,t}var R0=Ws,L0=128,rf=127;function Ws(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw Ws.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&rf)<<o:(i&rf)*Math.pow(2,o),o+=7}while(i>=L0);return Ws.bytes=s-n,r}var O0=Math.pow(2,7),K0=Math.pow(2,14),$0=Math.pow(2,21),M0=Math.pow(2,28),F0=Math.pow(2,35),V0=Math.pow(2,42),H0=Math.pow(2,49),j0=Math.pow(2,56),q0=Math.pow(2,63),z0=function(e){return e<O0?1:e<K0?2:e<$0?3:e<M0?4:e<F0?5:e<V0?6:e<H0?7:e<j0?8:e<q0?9:10},G0={encode:D0,decode:R0,encodingLength:z0},W0=G0,rn=W0;function nn(e,t=0){return[rn.decode(e,t),rn.decode.bytes]}function ur(e,t,r=0){return rn.encode(e,t,r),t}function lr(e){return rn.encodingLength(e)}function ot(e,t){let r=t.byteLength,n=lr(e),o=n+lr(r),s=new Uint8Array(o+r);return ur(e,s,0),ur(r,s,n),s.set(t,o),new dr(e,r,t,s)}function on(e){let t=ze(e),[r,n]=nn(t),[o,s]=nn(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new dr(r,o,i,t)}function of(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Wc(e.bytes,r.bytes)}}var dr=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};var sf=0,Z0="identity",af=ze;function Y0(e,t){if(t?.truncate!=null&&t.truncate!==e.byteLength){if(t.truncate<0||t.truncate>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,t.truncate)}return ot(sf,af(e))}var Be={code:sf,name:Z0,encode:af,digest:Y0};var Js={};fe(Js,{sha256:()=>sn,sha512:()=>J0});var X0=20;function Xs({name:e,code:t,encode:r,minDigestLength:n,maxDigestLength:o}){return new Ys(e,t,r,n,o)}var Ys=class{name;code;encode;minDigestLength;maxDigestLength;constructor(t,r,n,o,s){this.name=t,this.code=r,this.encode=n,this.minDigestLength=o??X0,this.maxDigestLength=s}digest(t,r){if(r?.truncate!=null){if(r.truncate<this.minDigestLength)throw new Error(`Invalid truncate option, must be greater than or equal to ${this.minDigestLength}`);if(this.maxDigestLength!=null&&r.truncate>this.maxDigestLength)throw new Error(`Invalid truncate option, must be less than or equal to ${this.maxDigestLength}`)}if(t instanceof Uint8Array){let n=this.encode(t);return n instanceof Uint8Array?cf(n,this.code,r?.truncate):n.then(o=>cf(o,this.code,r?.truncate))}else throw Error("Unknown type, must be binary type")}};function cf(e,t,r){if(r!=null&&r!==e.byteLength){if(r>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,r)}return ot(t,e)}function uf(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}var sn=Xs({name:"sha2-256",code:18,encode:uf("SHA-256")}),J0=Xs({name:"sha2-512",code:19,encode:uf("SHA-512")});function lf(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return ey(r,Qs(e),t??Q.encoder);default:return ty(r,Qs(e),t??nt.encoder)}}var df=new WeakMap;function Qs(e){let t=df.get(e);if(t==null){let r=new Map;return df.set(e,r),r}return t}var A=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==an)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==ry)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=ot(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&of(t.multihash,n.multihash)}toString(t){return lf(this,t)}toJSON(){return{"/":lf(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new e(n,o,s,i??pf(n,o,s.bytes))}else if(r[ny]===!0){let{version:n,multihash:o,code:s}=r,i=on(o);return e.create(n,s,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==an)throw new Error(`Version 0 CID must use dag-pb (code: ${an}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=pf(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,an,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=ze(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new dr(r.multihashCode,r.digestSize,s,o);return[r.version===0?e.createV0(i):e.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,y]=nn(t.subarray(r));return r+=y,l},o=n(),s=an;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,f=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(t,r){let[n,o]=Q0(t,r),s=e.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Qs(s).set(n,t),s}};function Q0(e,t){switch(e[0]){case"Q":{let r=t??Q;return[Q.prefix,r.decode(`${Q.prefix}${e}`)]}case Q.prefix:{let r=t??Q;return[Q.prefix,r.decode(e)]}case nt.prefix:{let r=t??nt;return[nt.prefix,r.decode(e)]}case tn.prefix:{let r=t??tn;return[tn.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function ey(e,t,r){let{prefix:n}=r;if(n!==Q.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o}function ty(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o}var an=112,ry=18;function pf(e,t,r){let n=lr(e),o=n+lr(t),s=new Uint8Array(o+r.byteLength);return ur(e,s,0),ur(t,s,n),s.set(r,o),s}var ny=Symbol.for("@ipld/js-cid/CID");var Ht={...qs,...Ks,...js,...Ls,...Os,...Ms,...Fs,...Vs,...Hs,...$s},hf={...Js,...Zs},mf={raw:Gs,json:zs};function ut(e=0){return new Uint8Array(e)}function Ue(e=0){return new Uint8Array(e)}function gf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var yf=gf("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),ei=gf("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Ue(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),oy={utf8:yf,"utf-8":yf,hex:Ht.base16,latin1:ei,ascii:ei,binary:ei,...Ht},eo=oy;function H(e,t="utf8"){let r=eo[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var we=class extends Error{static name="InvalidMultiaddrError";name="InvalidMultiaddrError"},lt=class extends Error{static name="ValidationError";name="ValidationError"},cn=class extends Error{static name="InvalidParametersError";name="InvalidParametersError"},to=class extends Error{static name="UnknownProtocolError";name="UnknownProtocolError"};function Se(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function G(e,t="utf8"){let r=eo[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var sy=Math.pow(2,7),iy=Math.pow(2,14),ay=Math.pow(2,21),ti=Math.pow(2,28),ri=Math.pow(2,35),ni=Math.pow(2,42),oi=Math.pow(2,49),re=128,Ae=127;function st(e){if(e<sy)return 1;if(e<iy)return 2;if(e<ay)return 3;if(e<ti)return 4;if(e<ri)return 5;if(e<ni)return 6;if(e<oi)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function fn(e,t,r=0){switch(st(e)){case 8:t[r++]=e&255|re,e/=128;case 7:t[r++]=e&255|re,e/=128;case 6:t[r++]=e&255|re,e/=128;case 5:t[r++]=e&255|re,e/=128;case 4:t[r++]=e&255|re,e>>>=7;case 3:t[r++]=e&255|re,e>>>=7;case 2:t[r++]=e&255|re,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function si(e,t){let r=e[t],n=0;if(n+=r&Ae,r<re||(r=e[t+1],n+=(r&Ae)<<7,r<re)||(r=e[t+2],n+=(r&Ae)<<14,r<re)||(r=e[t+3],n+=(r&Ae)<<21,r<re)||(r=e[t+4],n+=(r&Ae)*ti,r<re)||(r=e[t+5],n+=(r&Ae)*ri,r<re)||(r=e[t+6],n+=(r&Ae)*ni,r<re)||(r=e[t+7],n+=(r&Ae)*oi,r<re))return n;throw new RangeError("Could not decode varint")}function cy(e,t){let r=e.get(t),n=0;if(n+=r&Ae,r<re||(r=e.get(t+1),n+=(r&Ae)<<7,r<re)||(r=e.get(t+2),n+=(r&Ae)<<14,r<re)||(r=e.get(t+3),n+=(r&Ae)<<21,r<re)||(r=e.get(t+4),n+=(r&Ae)*ti,r<re)||(r=e.get(t+5),n+=(r&Ae)*ri,r<re)||(r=e.get(t+6),n+=(r&Ae)*ni,r<re)||(r=e.get(t+7),n+=(r&Ae)*oi,r<re))return n;throw new RangeError("Could not decode varint")}function ii(e,t=0){return e instanceof Uint8Array?si(e,t):cy(e,t)}function dt(e,t){t==null&&(t=e.reduce((o,s)=>o+s.length,0));let r=Ue(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var ro=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,o){return this.readAtomically(()=>{let s=0,i=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*o)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let y=Number.parseInt(l,t);if(!Number.isNaN(y))return y});if(f===void 0)break;if(s*=t,s+=f,s>u||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&c&&i>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let o=n*2;if(n<r.length-3){let i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2],r[o+3]=i[3],[o+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[o,!1];r[o]=s>>8,r[o+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,o]=t(r);if(n===16)return r;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),i=16-(n+2),[a]=t(s.subarray(0,i));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var uy=45,ly=15,no=new ro;function ai(e){if(!(e.length>ly))return no.new(e).parseWith(()=>no.readIPv4Addr())}function ci(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>uy))return no.new(e).parseWith(()=>no.readIPv6Addr())}function oo(e){return!!ai(e)}function xf(e){return!!ci(e)}function ui(e){return t=>H(t,e)}function li(e){return t=>G(t,e)}function hr(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function jt(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(t)}function bf(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=G(t[0],"base32"),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=jt(n);return dt([r,o],r.length+o.length)}function Ef(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=nt.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=jt(n);return dt([r,o],r.length+o.length)}function di(e){let t=e.subarray(0,e.length-2),r=e.subarray(e.length-2),n=H(t,"base32"),o=hr(r);return`${n}:${o}`}var pi=function(e){e=e.toString().trim();let t=new Uint8Array(4);return e.split(/\./g).forEach((r,n)=>{let o=parseInt(r,10);if(isNaN(o)||o<0||o>255)throw new we("Invalid byte value in IP address");t[n]=o}),t},Sf=function(e){let t=0;e=e.toString().trim();let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=oo(r[n]),i;s&&(i=pi(r[n]),r[n]=H(i.subarray(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,H(i.subarray(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){r[n]===""&&(r[n]="0");let s=parseInt(r[n],16);if(isNaN(s)||s<0||s>65535)throw new we("Invalid byte value in IP address");o[t++]=s>>8&255,o[t++]=s&255}return o},Af=function(e){if(e.byteLength!==4)throw new we("IPv4 address was incorrect length");let t=[];for(let r=0;r<e.byteLength;r++)t.push(e[r]);return t.join(".")},vf=function(e){if(e.byteLength!==16)throw new we("IPv6 address was incorrect length");let t=[];for(let n=0;n<e.byteLength;n+=2){let o=e[n],s=e[n+1],i=`${o.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`;t.push(i)}let r=t.join(":");try{let n=new URL(`http://[${r}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new we(`Invalid IPv6 address "${r}"`)}};function If(e){try{let t=new URL(`http://[${e}]`);return t.hostname.substring(1,t.hostname.length-1)}catch{throw new we(`Invalid IPv6 address "${e}"`)}}var fi=Object.values(Ht).map(e=>e.decoder),dy=(function(){let e=fi[0].or(fi[1]);return fi.slice(2).forEach(t=>e=e.or(t)),e})();function Cf(e){return dy.decode(e)}function Pf(e){return t=>e.encoder.encode(t)}function py(e){if(parseInt(e).toString()!==e)throw new lt("Value must be an integer")}function hy(e){if(e<0)throw new lt("Value must be a positive integer, or zero")}function my(e){return t=>{if(t>e)throw new lt(`Value must be smaller than or equal to ${e}`)}}function yy(...e){return t=>{for(let r of e)r(t)}}var un=yy(py,hy,my(65535));var le=-1,hi=class{protocolsByCode=new Map;protocolsByName=new Map;getProtocol(t){let r;if(typeof t=="string"?r=this.protocolsByName.get(t):r=this.protocolsByCode.get(t),r==null)throw new to(`Protocol ${t} was unknown`);return r}addProtocol(t){this.protocolsByCode.set(t.code,t),this.protocolsByName.set(t.name,t),t.aliases?.forEach(r=>{this.protocolsByName.set(r,t)})}removeProtocol(t){let r=this.protocolsByCode.get(t);r!=null&&(this.protocolsByCode.delete(r.code),this.protocolsByName.delete(r.name),r.aliases?.forEach(n=>{this.protocolsByName.delete(n)}))}},Ne=new hi,qy=[{code:4,name:"ip4",size:32,valueToBytes:pi,bytesToValue:Af,validate:e=>{if(!oo(e))throw new lt(`Invalid IPv4 address "${e}"`)}},{code:6,name:"tcp",size:16,valueToBytes:jt,bytesToValue:hr,validate:un},{code:273,name:"udp",size:16,valueToBytes:jt,bytesToValue:hr,validate:un},{code:33,name:"dccp",size:16,valueToBytes:jt,bytesToValue:hr,validate:un},{code:41,name:"ip6",size:128,valueToBytes:Sf,bytesToValue:vf,stringToValue:If,validate:e=>{if(!xf(e))throw new lt(`Invalid IPv6 address "${e}"`)}},{code:42,name:"ip6zone",size:le},{code:43,name:"ipcidr",size:8,bytesToValue:ui("base10"),valueToBytes:li("base10")},{code:53,name:"dns",size:le,resolvable:!0},{code:54,name:"dns4",size:le,resolvable:!0},{code:55,name:"dns6",size:le,resolvable:!0},{code:56,name:"dnsaddr",size:le,resolvable:!0},{code:132,name:"sctp",size:16,valueToBytes:jt,bytesToValue:hr,validate:un},{code:301,name:"udt"},{code:302,name:"utp"},{code:400,name:"unix",size:le,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:421,name:"p2p",aliases:["ipfs"],size:le,bytesToValue:ui("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?li("base58btc")(e):A.parse(e).multihash.bytes},{code:444,name:"onion",size:96,bytesToValue:di,valueToBytes:bf},{code:445,name:"onion3",size:296,bytesToValue:di,valueToBytes:Ef},{code:446,name:"garlic64",size:le},{code:447,name:"garlic32",size:le},{code:448,name:"tls"},{code:449,name:"sni",size:le},{code:454,name:"noise"},{code:460,name:"quic"},{code:461,name:"quic-v1"},{code:465,name:"webtransport"},{code:466,name:"certhash",size:le,bytesToValue:Pf(Vt),valueToBytes:Cf},{code:480,name:"http"},{code:481,name:"http-path",size:le,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:443,name:"https"},{code:477,name:"ws"},{code:478,name:"wss"},{code:479,name:"p2p-websocket-star"},{code:277,name:"p2p-stardust"},{code:275,name:"p2p-webrtc-star"},{code:276,name:"p2p-webrtc-direct"},{code:280,name:"webrtc-direct"},{code:281,name:"webrtc"},{code:290,name:"p2p-circuit"},{code:777,name:"memory",size:le}];qy.forEach(e=>{Ne.addProtocol(e)});function Bf(e){let t=[],r=0;for(;r<e.length;){let n=ii(e,r),o=Ne.getProtocol(n),s=st(n),i=zy(o,e,r+s),a=0;i>0&&o.size===le&&(a=st(i));let c=s+a+i,u={code:n,name:o.name,bytes:e.subarray(r,r+c)};if(i>0){let f=r+s+a,l=e.subarray(f,f+i);u.value=o.bytesToValue?.(l)??H(l)}t.push(u),r+=c}return t}function Tf(e){let t=0,r=[];for(let n of e){if(n.bytes==null){let o=Ne.getProtocol(n.code),s=st(n.code),i,a=0,c=0;n.value!=null&&(i=o.valueToBytes?.(n.value)??G(n.value),a=i.byteLength,o.size===le&&(c=st(a)));let u=new Uint8Array(s+c+a),f=0;fn(n.code,u,f),f+=s,i!=null&&(o.size===le&&(fn(a,u,f),f+=c),u.set(i,f)),n.bytes=u}r.push(n.bytes),t+=n.bytes.byteLength}return dt(r,t)}function _f(e){if(e.charAt(0)!=="/")throw new we('String multiaddr must start with "/"');let t=[],r="protocol",n="",o="";for(let s=1;s<e.length;s++){let i=e.charAt(s);i!=="/"&&(r==="protocol"?o+=e.charAt(s):n+=e.charAt(s));let a=s===e.length-1;if(i==="/"||a){let c=Ne.getProtocol(o);if(r==="protocol"){if(c.size==null||c.size===0){t.push({code:c.code,name:c.name}),n="",o="",r="protocol";continue}else if(a)throw new we(`Component ${o} was missing value`);r="value"}else if(r==="value"){let u={code:c.code,name:c.name};if(c.size!=null&&c.size!==0){if(n==="")throw new we(`Component ${o} was missing value`);u.value=c.stringToValue?.(n)??n}t.push(u),n="",o="",r="protocol"}}}if(o!==""&&n!=="")throw new we("Incomplete multiaddr");return t}function Df(e){return`/${e.flatMap(t=>{if(t.value==null)return t.name;let r=Ne.getProtocol(t.code);if(r==null)throw new we(`Unknown protocol code ${t.code}`);return[t.name,r.valueToString?.(t.value)??t.value]}).join("/")}`}function zy(e,t,r){return e.size==null||e.size===0?0:e.size>0?e.size/8:ii(t,r)}var Gy=Symbol.for("nodejs.util.inspect.custom"),bi=Symbol.for("@multiformats/multiaddr"),Wy=[53,54,55,56],xi=class extends Error{constructor(t="No available resolver"){super(t),this.name="NoAvailableResolverError"}};function Zy(e){if(e==null&&(e="/"),zt(e))return e.getComponents();if(e instanceof Uint8Array)return Bf(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),_f(e);if(Array.isArray(e))return e;throw new we("Must be a string, Uint8Array, Component[], or another Multiaddr")}var ao=class e{[bi]=!0;#e;#t;#r;constructor(t="/",r={}){this.#e=Zy(t),r.validate!==!1&&Yy(this)}get bytes(){return this.#r==null&&(this.#r=Tf(this.#e)),this.#r}toString(){return this.#t==null&&(this.#t=Df(this.#e)),this.#t}toJSON(){return this.toString()}toOptions(){let t,r,n,o,s="";for(let{code:a,name:c,value:u}of this.#e)a===42&&(s=`%${u??""}`),Wy.includes(a)&&(r="tcp",o=443,n=`${u??""}${s}`,t=a===55?6:4),(a===6||a===273)&&(r=c==="tcp"?"tcp":"udp",o=parseInt(u??"")),(a===4||a===41)&&(r="tcp",n=`${u??""}${s}`,t=a===41?6:4);if(t==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:o}}getComponents(){return[...this.#e]}protos(){return this.#e.map(({code:t,value:r})=>{let n=Ne.getProtocol(t);return{code:t,size:n.size??0,name:n.name,resolvable:!!n.resolvable,path:!!n.path}})}protoCodes(){return this.#e.map(({code:t})=>t)}protoNames(){return this.#e.map(({name:t})=>t)}tuples(){return this.#e.map(({code:t,value:r})=>{if(r==null)return[t];let n=Ne.getProtocol(t),o=[t];return r!=null&&o.push(n.valueToBytes?.(r)??G(r)),o})}stringTuples(){return this.#e.map(({code:t,value:r})=>r==null?[t]:[t,r])}encapsulate(t){let r=new e(t);return new e([...this.#e,...r.getComponents()],{validate:!1})}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new cn(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new e(n.slice(0,o),{validate:!1})}decapsulateCode(t){let r;for(let n=this.#e.length-1;n>-1;n--)if(this.#e[n].code===t){r=n;break}return new e(this.#e.slice(0,r),{validate:!1})}getPeerId(){try{let t=[];this.#e.forEach(({code:n,value:o})=>{n===421&&t.push([n,o]),n===290&&(t=[])});let r=t.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?H(Q.decode(`z${n}`),"base58btc"):H(A.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(let t of this.#e)if(Ne.getProtocol(t.code).path)return t.value??null;return null}equals(t){return Se(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=Uf.get(r.name);if(n==null)throw new xi(`no available resolver for ${r.name}`);return(await n(this,t)).map(s=>J(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(){return!(this.#e.length!==2||this.#e[0].code!==4&&this.#e[0].code!==41||this.#e[1].code!==6&&this.#e[1].code!==273)}[Gy](){return`Multiaddr(${this.toString()})`}};function Yy(e){e.getComponents().forEach(t=>{let r=Ne.getProtocol(t.code);t.value!=null&&r.validate?.(t.value)})}var j2=parseInt("0xFFFF",16),q2=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var Uf=new Map;function zt(e){return!!e?.[bi]}function J(e){return new ao(e)}var Ao={};fe(Ao,{code:()=>Og,decode:()=>Ui,decodeOptions:()=>Rg,encode:()=>Di,encodeOptions:()=>Ng,name:()=>Lg,toByteView:()=>$u});var tg=["string","number","bigint","symbol"],rg=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Rf(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if(tg.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(ng(e))return"Buffer";let r=og(e);return r||"Object"}function ng(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function og(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(rg.includes(t))return t}var d=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var E=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var gr=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",sg=new TextDecoder,ig=new TextEncoder;function co(e){return gr&&globalThis.Buffer.isBuffer(e)}function hn(e){return e instanceof Uint8Array?co(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var $f=gr?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):Of(e,t,r):(e,t,r)=>r-t>64?sg.decode(e.subarray(t,r)):Of(e,t,r),fo=gr?e=>e.length>64?globalThis.Buffer.from(e):Lf(e):e=>e.length>64?ig.encode(e):Lf(e),it=e=>Uint8Array.from(e),wr=gr?(e,t,r)=>co(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),Mf=gr?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),hn(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Ff=gr?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Vf(e,t){if(co(e)&&co(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Lf(e){let t=[],r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t}function Of(e,t,r){let n=[];for(;t<r;){let o=e[t],s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=r){let a,c,u,f;switch(i){case 1:o<128&&(s=o);break;case 2:a=e[t+1],(a&192)===128&&(f=(o&31)<<6|a&63,f>127&&(s=f));break;case 3:a=e[t+1],c=e[t+2],(a&192)===128&&(c&192)===128&&(f=(o&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:a=e[t+1],c=e[t+2],u=e[t+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(f=(o&15)<<18|(a&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),t+=i}return Ei(n)}var Kf=4096;function Ei(e){let t=e.length;if(t<=Kf)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Kf));return r}var ag=256,mn=class{constructor(t=ag){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=Ff(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=wr(n,0,this.cursor)}else r=Mf(this.chunks,this.cursor);return t&&this.reset(),r}};var U="CBOR decode error:",pt="CBOR encode error:",yn=[];yn[23]=1;yn[24]=2;yn[25]=3;yn[26]=5;yn[27]=9;function ht(e,t,r){if(e.length-t<r)throw new Error(`${U} not enough data for type`)}var de=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ke(e,t,r){ht(e,t,1);let n=e[t];if(r.strict===!0&&n<de[0])throw new Error(`${U} integer encoded in more bytes than necessary (strict decode)`);return n}function Re(e,t,r){ht(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<de[1])throw new Error(`${U} integer encoded in more bytes than necessary (strict decode)`);return n}function Le(e,t,r){ht(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<de[2])throw new Error(`${U} integer encoded in more bytes than necessary (strict decode)`);return n}function Oe(e,t,r){ht(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<de[3])throw new Error(`${U} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${U} integers outside of the safe integer range are not supported`)}function Hf(e,t,r,n){return new E(d.uint,ke(e,t+1,n),2)}function jf(e,t,r,n){return new E(d.uint,Re(e,t+1,n),3)}function qf(e,t,r,n){return new E(d.uint,Le(e,t+1,n),5)}function zf(e,t,r,n){return new E(d.uint,Oe(e,t+1,n),9)}function Me(e,t){return xe(e,0,t.value)}function xe(e,t,r){if(r<de[0]){let n=Number(r);e.push([t|n])}else if(r<de[1]){let n=Number(r);e.push([t|24,n])}else if(r<de[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<de[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<de[4]){let o=[t|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,e.push(o)}else throw new Error(`${U} encountered BigInt larger than allowable range`)}}Me.encodedSize=function(t){return xe.encodedSize(t.value)};xe.encodedSize=function(t){return t<de[0]?1:t<de[1]?2:t<de[2]?3:t<de[3]?5:9};Me.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function Gf(e,t,r,n){return new E(d.negint,-1-ke(e,t+1,n),2)}function Wf(e,t,r,n){return new E(d.negint,-1-Re(e,t+1,n),3)}function Zf(e,t,r,n){return new E(d.negint,-1-Le(e,t+1,n),5)}var Si=BigInt(-1),Yf=BigInt(1);function Xf(e,t,r,n){let o=Oe(e,t+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new E(d.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${U} integers outside of the safe integer range are not supported`);return new E(d.negint,Si-BigInt(o),9)}function uo(e,t){let r=t.value,n=typeof r=="bigint"?r*Si-Yf:r*-1-1;xe(e,t.type.majorEncoded,n)}uo.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*Si-Yf:r*-1-1;return n<de[0]?1:n<de[1]?2:n<de[2]?3:n<de[3]?5:9};uo.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function gn(e,t,r,n){ht(e,t,r+n);let o=wr(e,t+r,t+r+n);return new E(d.bytes,o,r+n)}function Jf(e,t,r,n){return gn(e,t,1,r)}function Qf(e,t,r,n){return gn(e,t,2,ke(e,t+1,n))}function eu(e,t,r,n){return gn(e,t,3,Re(e,t+1,n))}function tu(e,t,r,n){return gn(e,t,5,Le(e,t+1,n))}function ru(e,t,r,n){let o=Oe(e,t+1,n);if(typeof o=="bigint")throw new Error(`${U} 64-bit integer bytes lengths not supported`);return gn(e,t,9,o)}function lo(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===d.string?fo(e.value):e.value),e.encodedBytes}function xr(e,t){let r=lo(t);xe(e,t.type.majorEncoded,r.length),e.push(r)}xr.encodedSize=function(t){let r=lo(t);return xe.encodedSize(r.length)+r.length};xr.compareTokens=function(t,r){return fg(lo(t),lo(r))};function fg(e,t){return e.length<t.length?-1:e.length>t.length?1:Vf(e,t)}function wn(e,t,r,n,o){let s=r+n;ht(e,t,s);let i=new E(d.string,$f(e,t+r,t+s),s);return o.retainStringBytes===!0&&(i.byteValue=wr(e,t+r,t+s)),i}function nu(e,t,r,n){return wn(e,t,1,r,n)}function ou(e,t,r,n){return wn(e,t,2,ke(e,t+1,n),n)}function su(e,t,r,n){return wn(e,t,3,Re(e,t+1,n),n)}function iu(e,t,r,n){return wn(e,t,5,Le(e,t+1,n),n)}function au(e,t,r,n){let o=Oe(e,t+1,n);if(typeof o=="bigint")throw new Error(`${U} 64-bit integer string lengths not supported`);return wn(e,t,9,o,n)}var cu=xr;function br(e,t,r,n){return new E(d.array,n,r)}function fu(e,t,r,n){return br(e,t,1,r)}function uu(e,t,r,n){return br(e,t,2,ke(e,t+1,n))}function lu(e,t,r,n){return br(e,t,3,Re(e,t+1,n))}function du(e,t,r,n){return br(e,t,5,Le(e,t+1,n))}function pu(e,t,r,n){let o=Oe(e,t+1,n);if(typeof o=="bigint")throw new Error(`${U} 64-bit integer array lengths not supported`);return br(e,t,9,o)}function hu(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${U} indefinite length items not allowed`);return br(e,t,1,1/0)}function po(e,t){xe(e,d.array.majorEncoded,t.value)}po.compareTokens=Me.compareTokens;po.encodedSize=function(t){return xe.encodedSize(t.value)};function Er(e,t,r,n){return new E(d.map,n,r)}function mu(e,t,r,n){return Er(e,t,1,r)}function yu(e,t,r,n){return Er(e,t,2,ke(e,t+1,n))}function gu(e,t,r,n){return Er(e,t,3,Re(e,t+1,n))}function wu(e,t,r,n){return Er(e,t,5,Le(e,t+1,n))}function xu(e,t,r,n){let o=Oe(e,t+1,n);if(typeof o=="bigint")throw new Error(`${U} 64-bit integer map lengths not supported`);return Er(e,t,9,o)}function bu(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${U} indefinite length items not allowed`);return Er(e,t,1,1/0)}function ho(e,t){xe(e,d.map.majorEncoded,t.value)}ho.compareTokens=Me.compareTokens;ho.encodedSize=function(t){return xe.encodedSize(t.value)};function Eu(e,t,r,n){return new E(d.tag,r,1)}function Su(e,t,r,n){return new E(d.tag,ke(e,t+1,n),2)}function Au(e,t,r,n){return new E(d.tag,Re(e,t+1,n),3)}function vu(e,t,r,n){return new E(d.tag,Le(e,t+1,n),5)}function Iu(e,t,r,n){return new E(d.tag,Oe(e,t+1,n),9)}function mo(e,t){xe(e,d.tag.majorEncoded,t.value)}mo.compareTokens=Me.compareTokens;mo.encodedSize=function(t){return xe.encodedSize(t.value)};var mg=20,yg=21,gg=22,wg=23;function Cu(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${U} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new E(d.null,null,1):new E(d.undefined,void 0,1)}function Pu(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${U} indefinite length items not allowed`);return new E(d.break,void 0,1)}function Ai(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${U} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${U} Infinity values are not supported`)}return new E(d.float,e,t)}function Bu(e,t,r,n){return Ai(vi(e,t+1),3,n)}function Tu(e,t,r,n){return Ai(Ii(e,t+1),5,n)}function _u(e,t,r,n){return Ai(ku(e,t+1),9,n)}function yo(e,t,r){let n=t.value;if(n===!1)e.push([d.float.majorEncoded|mg]);else if(n===!0)e.push([d.float.majorEncoded|yg]);else if(n===null)e.push([d.float.majorEncoded|gg]);else if(n===void 0)e.push([d.float.majorEncoded|wg]);else{let o,s=!1;(!r||r.float64!==!0)&&(Uu(n),o=vi(Ge,1),n===o||Number.isNaN(n)?(Ge[0]=249,e.push(Ge.slice(0,3)),s=!0):(Nu(n),o=Ii(Ge,1),n===o&&(Ge[0]=250,e.push(Ge.slice(0,5)),s=!0))),s||(xg(n),o=ku(Ge,1),Ge[0]=251,e.push(Ge.slice(0,9)))}}yo.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Uu(n);let o=vi(Ge,1);if(n===o||Number.isNaN(n))return 3;if(Nu(n),o=Ii(Ge,1),n===o)return 5}return 9};var Du=new ArrayBuffer(9),Fe=new DataView(Du,1),Ge=new Uint8Array(Du,0);function Uu(e){if(e===1/0)Fe.setUint16(0,31744,!1);else if(e===-1/0)Fe.setUint16(0,64512,!1);else if(Number.isNaN(e))Fe.setUint16(0,32256,!1);else{Fe.setFloat32(0,e);let t=Fe.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)Fe.setUint16(0,31744,!1);else if(r===0)Fe.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?Fe.setUint16(0,0):o<-14?Fe.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):Fe.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function vi(e,t){if(e.length-t<2)throw new Error(`${U} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function Nu(e){Fe.setFloat32(0,e,!1)}function Ii(e,t){if(e.length-t<4)throw new Error(`${U} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function xg(e){Fe.setFloat64(0,e,!1)}function ku(e,t){if(e.length-t<8)throw new Error(`${U} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}yo.compareTokens=Me.compareTokens;function X(e,t,r){throw new Error(`${U} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function go(e){return()=>{throw new Error(`${U} ${e}`)}}var _=[];for(let e=0;e<=23;e++)_[e]=X;_[24]=Hf;_[25]=jf;_[26]=qf;_[27]=zf;_[28]=X;_[29]=X;_[30]=X;_[31]=X;for(let e=32;e<=55;e++)_[e]=X;_[56]=Gf;_[57]=Wf;_[58]=Zf;_[59]=Xf;_[60]=X;_[61]=X;_[62]=X;_[63]=X;for(let e=64;e<=87;e++)_[e]=Jf;_[88]=Qf;_[89]=eu;_[90]=tu;_[91]=ru;_[92]=X;_[93]=X;_[94]=X;_[95]=go("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)_[e]=nu;_[120]=ou;_[121]=su;_[122]=iu;_[123]=au;_[124]=X;_[125]=X;_[126]=X;_[127]=go("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)_[e]=fu;_[152]=uu;_[153]=lu;_[154]=du;_[155]=pu;_[156]=X;_[157]=X;_[158]=X;_[159]=hu;for(let e=160;e<=183;e++)_[e]=mu;_[184]=yu;_[185]=gu;_[186]=wu;_[187]=xu;_[188]=X;_[189]=X;_[190]=X;_[191]=bu;for(let e=192;e<=215;e++)_[e]=Eu;_[216]=Su;_[217]=Au;_[218]=vu;_[219]=Iu;_[220]=X;_[221]=X;_[222]=X;_[223]=X;for(let e=224;e<=243;e++)_[e]=go("simple values are not supported");_[244]=X;_[245]=X;_[246]=X;_[247]=Cu;_[248]=go("simple values are not supported");_[249]=Bu;_[250]=Tu;_[251]=_u;_[252]=X;_[253]=X;_[254]=X;_[255]=Pu;var We=[];for(let e=0;e<24;e++)We[e]=new E(d.uint,e,1);for(let e=-1;e>=-24;e--)We[31-e]=new E(d.negint,e,1);We[64]=new E(d.bytes,new Uint8Array(0),1);We[96]=new E(d.string,"",1);We[128]=new E(d.array,0,1);We[160]=new E(d.map,0,1);We[244]=new E(d.false,!1,1);We[245]=new E(d.true,!0,1);We[246]=new E(d.null,null,1);function Ru(e){switch(e.type){case d.false:return it([244]);case d.true:return it([245]);case d.null:return it([246]);case d.bytes:return e.value.length?void 0:it([64]);case d.string:return e.value===""?it([96]):void 0;case d.array:return e.value===0?it([128]):void 0;case d.map:return e.value===0?it([160]):void 0;case d.uint:return e.value<24?it([Number(e.value)]):void 0;case d.negint:if(e.value>=-24)return it([31-Number(e.value)])}}var Eg={float64:!1,mapSorter:vg,quickEncodeToken:Ru};function Sg(){let e=[];return e[d.uint.major]=Me,e[d.negint.major]=uo,e[d.bytes.major]=xr,e[d.string.major]=cu,e[d.array.major]=po,e[d.map.major]=ho,e[d.tag.major]=mo,e[d.float.major]=yo,e}var Lu=Sg(),Ci=new mn,xo=class e{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${pt} object contains circular references`);return new e(r,t)}},Pt={null:new E(d.null,null),undefined:new E(d.undefined,void 0),true:new E(d.true,!0),false:new E(d.false,!1),emptyArray:new E(d.array,0),emptyMap:new E(d.map,0)},Bt={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new E(d.float,e):e>=0?new E(d.uint,e):new E(d.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new E(d.uint,e):new E(d.negint,e)},Uint8Array(e,t,r,n){return new E(d.bytes,e)},string(e,t,r,n){return new E(d.string,e)},boolean(e,t,r,n){return e?Pt.true:Pt.false},null(e,t,r,n){return Pt.null},undefined(e,t,r,n){return Pt.undefined},ArrayBuffer(e,t,r,n){return new E(d.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new E(d.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[Pt.emptyArray,new E(d.break)]:Pt.emptyArray;n=xo.createCheck(n,e);let o=[],s=0;for(let i of e)o[s++]=wo(i,r,n);return r.addBreakTokens?[new E(d.array,e.length),o,new E(d.break)]:[new E(d.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return r.addBreakTokens===!0?[Pt.emptyMap,new E(d.break)]:Pt.emptyMap;n=xo.createCheck(n,e);let a=[],c=0;for(let u of s)a[c++]=[wo(u,r,n),wo(o?e.get(u):e[u],r,n)];return Ag(a,r),r.addBreakTokens?[new E(d.map,i),a,new E(d.break)]:[new E(d.map,i),a]}};Bt.Map=Bt.Object;Bt.Buffer=Bt.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Bt[`${e}Array`]=Bt.DataView;function wo(e,t={},r){let n=Rf(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||Bt[n];if(typeof o=="function"){let i=o(e,n,t,r);if(i!=null)return i}let s=Bt[n];if(!s)throw new Error(`${pt} unsupported type: ${n}`);return s(e,n,t,r)}function Ag(e,t){t.mapSorter&&e.sort(t.mapSorter)}function vg(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=Lu[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Ou(e,t,r,n){if(Array.isArray(t))for(let o of t)Ou(e,o,r,n);else r[t.type.major](e,t,n)}function Pi(e,t,r){let n=wo(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=t[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,r),a=new mn(i);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return hn(a.chunks[0])}}return Ci.reset(),Ou(Ci,n,t,r),Ci.toBytes(!0)}function Bi(e,t){return t=Object.assign({},Eg,t),Pi(e,Lu,t)}var Ig={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},bo=class{constructor(t,r={}){this._pos=0,this.data=t,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let t=this.data[this._pos],r=We[t];if(r===void 0){let n=_[t];if(!n)throw new Error(`${U} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=n(this.data,this._pos,o,this.options)}return this._pos+=r.encodedLength,r}},xn=Symbol.for("DONE"),Eo=Symbol.for("BREAK");function Cg(e,t,r){let n=[];for(let o=0;o<e.value;o++){let s=Sr(t,r);if(s===Eo){if(e.value===1/0)break;throw new Error(`${U} got unexpected break to lengthed array`)}if(s===xn)throw new Error(`${U} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=s}return n}function Pg(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<e.value;i++){let a=Sr(t,r);if(a===Eo){if(e.value===1/0)break;throw new Error(`${U} got unexpected break to lengthed map`)}if(a===xn)throw new Error(`${U} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${U} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in o))throw new Error(`${U} found repeat map key "${a}"`);let c=Sr(t,r);if(c===xn)throw new Error(`${U} found map but not enough entries (got ${i} [no value], expected ${e.value})`);n?s.set(a,c):o[a]=c}return n?s:o}function Sr(e,t){if(e.done())return xn;let r=e.next();if(r.type===d.break)return Eo;if(r.type.terminal)return r.value;if(r.type===d.array)return Cg(r,e,t);if(r.type===d.map)return Pg(r,e,t);if(r.type===d.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=Sr(e,t);return t.tags[r.value](n)}throw new Error(`${U} tag not supported (${r.value})`)}throw new Error("unsupported")}function Ti(e,t){if(!(e instanceof Uint8Array))throw new Error(`${U} data to decode must be a Uint8Array`);t=Object.assign({},Ig,t);let r=t.tokenizer||new bo(e,t),n=Sr(r,t);if(n===xn)throw new Error(`${U} did not find any content to decode`);if(n===Eo)throw new Error(`${U} got unexpected break`);return[n,e.subarray(r.pos())]}function bn(e,t){let[r,n]=Ti(e,t);if(n.length>0)throw new Error(`${U} too many terminals, data makes no sense`);return r}var Ku=42;function $u(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function Tg(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=A.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new E(d.tag,Ku),new E(d.bytes,r)]}function _g(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Dg(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function Ug(e){for(let t of e.keys())if(typeof t!="string"||t.length===0)throw new Error("Non-string Map keys are not supported by the IPLD Data Model and cannot be encoded");return null}var _i={float64:!0,typeEncoders:{Map:Ug,Object:Tg,undefined:_g,number:Dg}},Ng={..._i,typeEncoders:{..._i.typeEncoders}};function kg(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return A.decode(e.subarray(1))}var So={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};So.tags[Ku]=kg;var Rg={...So,tags:So.tags.slice()},Lg="dag-cbor",Og=113,Di=e=>Bi(e,_i),Ui=e=>bn($u(e),So);var Ki={};fe(Ki,{code:()=>Wg,decode:()=>Fu,encode:()=>Mu,format:()=>Zg,name:()=>Gg,parse:()=>Xg,stringify:()=>Zg});var Ni=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===d.array&&(r.elements++,r.elements!==1&&t.push([44])),r.type===d.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?t.push([44]):t.push([58]))))}[d.uint.major](t,r){this.prefix(t);let n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);t.push(o)}[d.negint.major](t,r){this[d.uint.major](t,r)}[d.bytes.major](t,r){throw new Error(`${pt} unsupported type: Uint8Array`)}[d.string.major](t,r){this.prefix(t);let n=fo(JSON.stringify(r.value));t.push(n.length>32?hn(n):n)}[d.array.major](t,r){this.prefix(t),this.inRecursive.push({type:d.array,elements:0}),t.push([91])}[d.map.major](t,r){this.prefix(t),this.inRecursive.push({type:d.map,elements:0}),t.push([123])}[d.tag.major](t,r){}[d.float.major](t,r){if(r.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===d.array)t.push([93]);else if(i.type===d.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${pt} unsupported type: undefined`);if(this.prefix(t),r.type.name==="true"){t.push([116,114,117,101]);return}else if(r.type.name==="false"){t.push([102,97,108,115,101]);return}else if(r.type.name==="null"){t.push([110,117,108,108]);return}let n=String(r.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),t.push(o)}};function Kg(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${pt} complex map keys are not supported`);let r=e[0],n=t[0];if(r.type!==d.string||n.type!==d.string)throw new Error(`${pt} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${pt} unexpected duplicate map keys, this is not supported`)}var $g={addBreakTokens:!0,mapSorter:Kg};function ki(e,t){return t=Object.assign({},$g,t),Pi(e,new Ni,t)}var Ar=class{constructor(t,r={}){this._pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this._pos]}expect(t){if(this.data.length-this._pos<t.length)throw new Error(`${U} unexpected end of input at position ${this._pos}`);for(let r=0;r<t.length;r++)if(this.data[this._pos++]!==t[r])throw new Error(`${U} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){let t=this._pos,r=!1,n=!1,o=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new E(d.uint,0,this._pos-t);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===t+1)throw new Error(`${U} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${U} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(t,this._pos)),i=parseFloat(s);return n?new E(d.float,i,this._pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new E(i>=0?d.uint:d.negint,i,this._pos-t):new E(i>=0?d.uint:d.negint,BigInt(s),this._pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${U} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new E(d.string,c,i)}}let t=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${U} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${U} unexpected unicode escape character at position ${this._pos}`);s=s*16+a,this._pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${U} unexpected unicode sequence at position ${this._pos}`);let c,u,f,l;switch(a){case 1:s<128&&(i=s);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(l=(s&31)<<6|c&63,l>127&&(i=l));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(l=(s&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],f=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(l=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,l>65535&&l<1114112&&(i=l))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this._pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${U} unexpected string termination at position ${this._pos}`);switch(i=this.ch(),this._pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${U} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new E(d.string,Ei(r),this._pos-t);default:if(s<32)throw new Error(`${U} invalid control character at position ${this._pos}`);s<128?(r.push(s),this._pos++):o()}}throw new Error(`${U} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new E(d.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new E(d.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new E(d.null,null,4);case 102:return this.expect([102,97,108,115,101]),new E(d.false,!1,5);case 116:return this.expect([116,114,117,101]),new E(d.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${U} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${U} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new E(d.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${U} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);let t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${U} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${U} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}};function Ri(e,t){return t=Object.assign({tokenizer:new Ar(e,t)},t),bn(e,t)}function Fg(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function Vg(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=A.asCID(e);if(!t)return null;let r=t.toString();return[new E(d.map,1/0,1),new E(d.string,"/",1),new E(d.string,r,r.length),new E(d.break,void 0,1)]}function vo(e){let t=fr.encode(e).slice(1);return[new E(d.map,1/0,1),new E(d.string,"/",1),new E(d.map,1/0,1),new E(d.string,"bytes",5),new E(d.string,t,t.length),new E(d.break,void 0,1),new E(d.break,void 0,1)]}function Ze(e){return vo(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Hg(e){return vo(new Uint8Array(e))}function jg(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function qg(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var zg={typeEncoders:{Object:Vg,Buffer:vo,Uint8Array:vo,Int8Array:Ze,Uint16Array:Ze,Int16Array:Ze,Uint32Array:Ze,Int32Array:Ze,Float32Array:Ze,Float64Array:Ze,Uint8ClampedArray:Ze,BigInt64Array:Ze,BigUint64Array:Ze,DataView:Ze,ArrayBuffer:Hg,undefined:jg,number:qg}},Li=class extends Ar{constructor(t,r){super(t,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let t=this._next();if(t.type===d.map){let r=this._next();if(r.type===d.string&&r.value==="/"){let n=this._next();if(n.type===d.string){if(this._next().type!==d.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new E(d.tag,42,0)}if(n.type===d.map){let o=this._next();if(o.type===d.string&&o.value==="bytes"){let s=this._next();if(s.type===d.string){for(let a=0;a<2;a++)if(this._next().type!==d.break)throw new Error("Invalid encoded Bytes form");let i=fr.decode(`m${s.value}`);return new E(d.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return t}},Oi={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Oi.tags[42]=A.parse;var Gg="dag-json",Wg=297,Mu=e=>ki(e,zg),Fu=e=>{let t=Fg(e),r=Object.assign(Oi,{tokenizer:new Li(t,Oi)});return Ri(t,r)},Zg=e=>Yg.decode(Mu(e));var Yg=new TextDecoder,Xg=e=>Fu(Jg.encode(e)),Jg=new TextEncoder;var Hi={};fe(Hi,{code:()=>uw,createLink:()=>Xu,createNode:()=>Yu,decode:()=>dw,encode:()=>lw,name:()=>fw,prepare:()=>Fi,validate:()=>Vi});var Qg=new TextDecoder;function $i(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");let o=e[t++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,t]}function Io(e,t){let r;[r,t]=$i(e,t);let n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Vu(e,t){let r;return[r,t]=$i(e,t),[r&7,r>>3,t]}function ew(e){let t={},r=e.length,n=0;for(;n<r;){let o,s;if([o,s,n]=Vu(e,n),s===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Io(e,n)}else if(s===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=Io(e,n),t.Name=Qg.decode(i)}else if(s===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[t.Tsize,n]=$i(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function Hu(e){let t=e.length,r=0,n,o=!1,s;for(;r<t;){let a,c;if([a,c,r]=Vu(e,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=Io(e,r),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=Io(e,r),n.push(ew(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var qu=new TextEncoder,ju=2**32,tw=2**31;function rw(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=En(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){let n=qu.encode(e.Name);r-=n.length,t.set(n,r),r=En(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=En(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function zu(e){let t=ow(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=En(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){let s=rw(e.Links[o],r.subarray(0,n));n-=s,n=En(r,n,s)-1,r[n]=18}return r}function nw(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+vr(r)}if(typeof e.Name=="string"){let r=qu.encode(e.Name).length;t+=1+r+vr(r)}return typeof e.Tsize=="number"&&(t+=1+vr(e.Tsize)),t}function ow(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+vr(r)}if(e.Links)for(let r of e.Links){let n=nw(r);t+=1+n+vr(n)}return t}function En(e,t,r){t-=vr(r);let n=t;for(;r>=tw;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function vr(e){return e%2===0&&e++,Math.floor((sw(e)+6)/7)}function sw(e){let t=0;return e>=ju&&(e=Math.floor(e/ju),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+iw[e]}var iw=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var aw=["Data","Links"],cw=["Hash","Name","Tsize"],Mi=new TextEncoder;function Wu(e,t){if(e===t)return 0;let r=e.Name?Mi.encode(e.Name):[],n=t.Name?Mi.encode(t.Name):[],o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function Gu(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function Zu(e){if(typeof e.asCID=="object"){let r=A.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Hash){let r=A.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=A.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=A.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function Fi(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=Mi.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(Zu),t.Links.sort(Wu);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function Vi(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Gu(e,aw))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Gu(r,cw))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&Wu(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Yu(e,t=[]){return Fi({Data:e,Links:t})}function Xu(e,t,r){return Zu({Hash:r,Name:e,Tsize:t})}function Ju(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}var fw="dag-pb",uw=112;function lw(e){Vi(e);let t={};return e.Links&&(t.Links=e.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),zu(t)}function dw(e){let t=Ju(e),r=Hu(t),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(o=>{let s={};try{s.Hash=A.decode(o.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(s.Name=o.Name),o.Tsize!==void 0&&(s.Tsize=o.Tsize),s})),n}var Qi={};fe(Qi,{code:()=>Xw,decode:()=>tx,encode:()=>ex,name:()=>Yw,toGeneral:()=>El});var J6=new Uint8Array(0);function Qu(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Ir(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function pw(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var I=0,S=0,m=0,B=h.length;m!==B&&h[m]===0;)m++,I++;for(var x=(B-m)*f+1>>>0,T=new Uint8Array(x);m!==B;){for(var k=h[m],$=0,M=x-1;(k!==0||$<S)&&M!==-1;M--,$++)k+=256*T[M]>>>0,T[M]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");S=$,m++}for(var v=x-S;v!==x&&T[v]===0;)v++;for(var C=c.repeat(I);v<x;++v)C+=e.charAt(T[v]);return C}function y(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var I=0;if(h[I]!==" "){for(var S=0,m=0;h[I]===c;)S++,I++;for(var B=(h.length-I)*u+1>>>0,x=new Uint8Array(B);h[I];){var T=r[h.charCodeAt(I)];if(T===255)return;for(var k=0,$=B-1;(T!==0||k<m)&&$!==-1;$--,k++)T+=a*x[$]>>>0,x[$]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");m=k,I++}if(h[I]!==" "){for(var M=B-m;M!==B&&x[M]===0;)M++;for(var v=new Uint8Array(S+(B-M)),C=S;M!==B;)v[C++]=x[M++];return v}}}function P(h){var I=y(h);if(I)return I;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:y,decode:P}}var hw=pw,mw=hw,el=mw;var ji=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},qi=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return tl(this,t)}},zi=class{decoders;constructor(t){this.decoders=t}or(t){return tl(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function tl(e,t){return new zi({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var Gi=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new ji(t,r,n),this.decoder=new qi(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function rl({name:e,prefix:t,encode:r,decode:n}){return new Gi(e,t,r,n)}function Wi({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=el(r,e);return rl({prefix:t,name:e,encode:n,decode:s=>Ir(o(s))})}function yw(e,t,r,n){let o={};for(let f=0;f<t.length;++f)o[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=o[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=r||(255&c<<8-a)!==0)throw new SyntaxError("Unexpected end of data");return i}function gw(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i!==0&&(s+=t[o&a<<r-i]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function Ce({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return rl({prefix:t,name:e,encode(o){return gw(o,n,r)},decode(o){return yw(o,n,r,e)}})}var s8=Ce({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),i8=Ce({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zi=Ce({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a8=Ce({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Ye(e){return Zi.encode(e).slice(1)}function Ve(e){return Zi.decode(`u${e}`)}var Sn=Ce({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d8=Ce({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),p8=Ce({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),h8=Ce({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),m8=Ce({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),y8=Ce({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),g8=Ce({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),w8=Ce({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x8=Ce({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var mt=Wi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),S8=Wi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ww=sl,nl=128,xw=127,bw=~xw,Ew=Math.pow(2,31);function sl(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Ew;)t[r++]=e&255|nl,e/=128;for(;e&bw;)t[r++]=e&255|nl,e>>>=7;return t[r]=e|0,sl.bytes=r-n+1,t}var Sw=Yi,Aw=128,ol=127;function Yi(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw Yi.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&ol)<<o:(i&ol)*Math.pow(2,o),o+=7}while(i>=Aw);return Yi.bytes=s-n,r}var vw=Math.pow(2,7),Iw=Math.pow(2,14),Cw=Math.pow(2,21),Pw=Math.pow(2,28),Bw=Math.pow(2,35),Tw=Math.pow(2,42),_w=Math.pow(2,49),Dw=Math.pow(2,56),Uw=Math.pow(2,63),Nw=function(e){return e<vw?1:e<Iw?2:e<Cw?3:e<Pw?4:e<Bw?5:e<Tw?6:e<_w?7:e<Dw?8:e<Uw?9:10},kw={encode:ww,decode:Sw,encodingLength:Nw},Rw=kw,An=Rw;function vn(e,t=0){return[An.decode(e,t),An.decode.bytes]}function Cr(e,t,r=0){return An.encode(e,t,r),t}function Pr(e){return An.encodingLength(e)}function al(e,t){let r=t.byteLength,n=Pr(e),o=n+Pr(r),s=new Uint8Array(o+r);return Cr(e,s,0),Cr(r,s,n),s.set(t,o),new Br(e,r,t,s)}function cl(e){let t=Ir(e),[r,n]=vn(t),[o,s]=vn(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Br(r,o,i,t)}function fl(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Qu(e.bytes,r.bytes)}}var Br=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};function ul(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return Kw(r,Xi(e),t??mt.encoder);default:return $w(r,Xi(e),t??Sn.encoder)}}var ll=new WeakMap;function Xi(e){let t=ll.get(e);if(t==null){let r=new Map;return ll.set(e,r),r}return t}var Tr=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==In)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Mw)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=al(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&fl(t.multihash,n.multihash)}toString(t){return ul(this,t)}toJSON(){return{"/":ul(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new e(n,o,s,i??dl(n,o,s.bytes))}else if(r[Fw]===!0){let{version:n,multihash:o,code:s}=r,i=cl(o);return e.create(n,s,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==In)throw new Error(`Version 0 CID must use dag-pb (code: ${In}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=dl(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,In,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=Ir(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new Br(r.multihashCode,r.digestSize,s,o);return[r.version===0?e.createV0(i):e.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,y]=vn(t.subarray(r));return r+=y,l},o=n(),s=In;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,f=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(t,r){let[n,o]=Ow(t,r),s=e.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Xi(s).set(n,t),s}};function Ow(e,t){switch(e[0]){case"Q":{let r=t??mt;return[mt.prefix,r.decode(`${mt.prefix}${e}`)]}case mt.prefix:{let r=t??mt;return[mt.prefix,r.decode(e)]}case Sn.prefix:{let r=t??Sn;return[Sn.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function Kw(e,t,r){let{prefix:n}=r;if(n!==mt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o}function $w(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o}var In=112,Mw=18;function dl(e,t,r){let n=Pr(e),o=n+Pr(t),s=new Uint8Array(o+r.byteLength);return Cr(e,s,0),Cr(t,s,n),s.set(r,o),s}var Fw=Symbol.for("@ipld/js-cid/CID");function pl(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:Tr.decode(Ve(r))}}function Vw(e){let t={signature:Ve(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Ve(e.protected)),t}function hl(e){return{payload:Ve(e.payload),signatures:e.signatures.map(Vw)}}function Hw(e){let t={signature:Ye(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Ye(e.protected)),t}function ml(e){let t={payload:Ye(e.payload),signatures:e.signatures.map(Hw)};try{return t.pld=Ji(qw(e.payload)),t}catch{try{return t.link=Tr.decode(new Uint8Array(e.payload)),t}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Ji(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return Tr.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Ji);if(jw(e)){let t={};for(let r in e)t[r]=Ji(e[r]);return t}}return e}function jw(e){return typeof e=="object"&&e!==null}function qw(e){return JSON.parse(new TextDecoder().decode(e))}function yl(e){let[t,r,n,o,s]=e,i={ciphertext:o,iv:n,protected:t,tag:s};return r&&(i.recipients=[{encrypted_key:r}]),i}function Gw(e){let t={};return e.encrypted_key&&(t.encrypted_key=Ve(e.encrypted_key)),e.header&&(t.header=e.header),t}function gl(e){let t={ciphertext:Ve(e.ciphertext),protected:Ve(e.protected),iv:Ve(e.iv),tag:Ve(e.tag)};return e.aad&&(t.aad=Ve(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Gw)),e.unprotected&&(t.unprotected=e.unprotected),t}function Ww(e){let t={};return e.encrypted_key&&(t.encrypted_key=Ye(e.encrypted_key)),e.header&&(t.header=e.header),t}function wl(e){let t={ciphertext:Ye(e.ciphertext),protected:Ye(e.protected),iv:Ye(e.iv),tag:Ye(e.tag)};return e.aad&&(t.aad=Ye(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Ww)),e.unprotected&&(t.unprotected=e.unprotected),t}var Yw="dag-jose",Xw=133;function xl(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function Jw(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function Qw(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function bl(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function El(e){if(typeof e=="string"){let t=e.split(".");if(t.length===3)return pl(t);if(t.length===5)return yl(t);throw new Error("Not a valid JOSE string")}if(xl(e)||bl(e))return e;throw new Error("Not a valid unencoded JOSE object")}function ex(e){typeof e=="string"&&(e=El(e));let t;if(xl(e))t=hl(e);else if(bl(e))t=gl(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(Di(t))}function tx(e){let t;try{t=Ui(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(Jw(t))return ml(t);if(Qw(t))return wl(t);throw new Error("Not a valid DAG-JOSE object")}function pe(e){let t=new globalThis.AbortController;function r(){t.abort();for(let s of e)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}for(let s of e){if(s?.aborted===!0){r();break}s?.addEventListener!=null&&s.addEventListener("abort",r)}function n(){for(let s of e)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}let o=t.signal;return o.clear=n,o}var Sl="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Al=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Sl[r[e]&63];return t};var Cl=Ft(Il(),1),Pl=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,ea=(0,Cl.default)(),_r=Pl&&!ea;var Bl=ea&&Pl,Tl=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!ea,Dr=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,M8=typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+"_"+"ENV"]==="test",F8=typeof navigator<"u"&&navigator.product==="ReactNative";async function*yt(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var Bn=Ft(Cn(),1);function ox(e){let[t,r]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}var Tt=ox;function sx(e){return e[Symbol.asyncIterator]!=null}function ix(e,t){let r=0;if(sx(e))return(async function*(){for await(let c of e)yield t(c,r++)})();let n=Tt(e),{value:o,done:s}=n.next();if(s===!0)return(function*(){})();let i=t(o,r++);if(typeof i.then=="function")return(async function*(){yield await i;for(let c of n)yield t(c,r++)})();let a=t;return(function*(){yield i;for(let c of n)yield a(c,r++)})()}var ta=ix;var Co=class extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}},Po=class extends Error{constructor(t="Invalid mtime"){super(t),this.name="InvalidMtimeError"}};function gt(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Wt(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Pn(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function Zt(e){return typeof e?.getReader=="function"}function Bo(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function ax(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function cx(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function fx(e){return Array.isArray(e)}function _t(e){if(e!=null){if(ax(e)&&(e={secs:e.secs,nsecs:e.nsecs}),cx(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),fx(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){let t=e.getTime(),r=Math.floor(t/1e3);e={secs:BigInt(r),nsecs:(t-r*1e3)*1e3}}if(typeof e=="bigint"){let t=e/BigInt(1e9),r=e-t*BigInt(1e9);e={secs:t,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new Po("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*Ul(e,t){if(typeof e=="string"||e instanceof String||gt(e)||Wt(e)||e._readableState!=null)throw(0,Bn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Zt(e)&&(e=yt(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=Tt(e),{value:n,done:o}=await r.peek();if(o===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw(0,Bn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*ta(r,async s=>ra({content:s},t));return}if(gt(n)){yield ra({content:r},t);return}if(Pn(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Zt(n)||Wt(n)){yield*ta(r,async s=>ra(s,t));return}}throw Pn(e)?(0,Bn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,Bn.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function ra(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r??"",mode:Bo(n),mtime:_t(o)};return s!=null?i.content=await t(s):r==null&&(i.content=await t(e)),i}var na=Symbol.for("@libp2p/peer-id");var Xe=class extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}};var To=class extends Error{static name="InvalidCIDError";constructor(t="Invalid CID"){super(t),this.name="InvalidCIDError"}},_o=class extends Error{static name="InvalidMultihashError";constructor(t="Invalid Multihash"){super(t),this.name="InvalidMultihashError"}};function ux(e){return e[Symbol.asyncIterator]!=null}function lx(e){if(ux(e))return(async()=>{let r=[];for await(let n of e)r.push(n);return r})();let t=[];for(let r of e)t.push(r);return t}var Do=lx;async function Uo(e){if(gt(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(Wt(e))return e;if(Zt(e)&&(e=yt(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=Tt(e),{value:r,done:n}=await t.peek();if(n===!0)return Nl(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Do(t))]);if(gt(r)||typeof r=="string"||r instanceof String)return Nl(t)}throw new Xe(`Unexpected input: ${e}`)}async function Nl(e){let t=[];for await(let r of e)t.push(r);return new Blob(t)}function kl(e){return Ul(e,Uo,!0)}function Ur(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function No(e,t,r={},n){let o=[],s=new FormData,i=0,a=0;for await(let{content:c,path:u,mode:f,mtime:l}of kl(e)){let y="",P=c!=null?"file":"dir";i>0&&(y=`-${i}`);let h=P+y,I=[];if(f!=null&&I.push(`mode=${Ur(f)}`),l!=null){let{secs:S,nsecs:m}=l;I.push(`mtime=${S}`),m!=null&&I.push(`mtime-nsecs=${m}`)}if(I.length>0&&(h=`${h}?${I.join("&")}`),c!=null){s.set(h,c,u!=null?encodeURIComponent(u):void 0);let S=a+c.size;o.push({name:u,start:a,end:S}),a=S}else if(u!=null)s.set(h,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");i++}return{total:a,parts:o,headers:r,body:s}}async function ve(e,t,r={},n=`-----------------------------${Al()}`){let o=No;return Bl&&(o=No),o(e,t,r,n)}function W(e){if(e==null)return e;let t=/^[A-Z]+$/,r={};return Object.keys(e).reduce((n,o)=>(t.test(o)?n[o.toLowerCase()]=e[o]:t.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),r)}function p({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:o,...s}={}){t!=null&&(s={...s,...t}),r!=null&&(s.hash=r),n!=null&&(n=_t(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=Ur(o)),isNaN(s.timeout)||(s.timeout=`${s.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);let i={};for(let[c,u]of Object.entries(s))u!=null&&(i[c]=u);let a=new URLSearchParams(i);return e.forEach(c=>{a.append("arg",c)}),a}function ko(e){return async function*(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]);try{let{headers:i,body:a,total:c,parts:u}=await ve(r,o,n.headers),[f,l]=typeof n.progress=="function"?dx(c,n.progress,u):[void 0,void 0],y=await e.post("add",{searchParams:p({"stream-channels":!0,...n,progress:!!f}),onUploadProgress:l,signal:s,headers:i,body:a});for await(let P of y.ndjson())P=W(P),P.hash!==void 0?yield hx(P):f?.(P.bytes??0,P.name)}finally{s.clear()}}}var dx=(e,t,r)=>r!=null?[void 0,px(e,r,t)]:[t,void 0],px=(e,t,r)=>{let n=0,o=t.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*e);for(;n<o;){let{start:c,end:u,name:f}=t[n];if(a<u){r(a-c,f);break}else r(u-c,f),n+=1}}};function hx({name:e,hash:t,size:r,mode:n,mtime:o,mtimeNsecs:s}){let i={path:e,cid:A.parse(t),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s??0}),i}function mx(e){return e[Symbol.asyncIterator]!=null}function yx(e){if(mx(e))return(async()=>{let r;for await(let n of e)r=n;return r})();let t;for(let r of e)t=r;return t}var Dt=yx;var Lo=Ft(Cn(),1);async function*Rl(e,t){if(e==null)throw(0,Lo.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield Ro(e.toString(),t);return}if(gt(e)||Wt(e)){yield Ro(e,t);return}if(Zt(e)&&(e=yt(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=Tt(e),{value:n,done:o}=await r.peek();if(o===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||gt(n)||typeof n=="string"||n instanceof String){yield Ro(r,t);return}throw(0,Lo.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Pn(e)){yield Ro(e,t);return}throw(0,Lo.default)(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Ro(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r??"",mode:Bo(n),mtime:_t(o)};return s!=null?i.content=await t(s):r==null&&(i.content=await t(e)),i}function Ll(e){return Rl(e,Uo)}function Ol(e){let t=ko(e);return async function(n,o={}){let s=Ll(n),i=t(s,o),a=await Dt(i);if(a==null)throw new Error("Invalid body");return a}}var he=class extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}},Nr=class extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}};var Tn=class extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}};var $l=Symbol.for("@achingbrain/uint8arraylist");function Kl(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let o=r+n.byteLength;if(t<o)return{buf:n,index:t-r};r=o}throw new RangeError("index is out of bounds")}function Oo(e){return!!e?.[$l]}var Ke=class e{bufs;length;[$l]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Oo(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Oo(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=Kl(this.bufs,t);return r.buf[r.index]}set(t,r){let n=Kl(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(Oo(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:o}=this._subList(t,r);return dt(n,o)}subarray(t,r){let{bufs:n,length:o}=this._subList(t,r);return n.length===1?n[0]:dt(n,o)}sublist(t,r){let{bufs:n,length:o}=this._subList(t,r),s=new e;return s.length=o,s.bufs=[...n],s}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};let n=[],o=0;for(let s=0;s<this.bufs.length;s++){let i=this.bufs[s],a=o,c=a+i.byteLength;if(o=c,t>=c)continue;let u=t>=a&&t<c,f=r>a&&r<=c;if(u&&f){if(t===a&&r===c){n.push(i);break}let l=t-a;n.push(i.subarray(l,l+(r-t)));break}if(u){if(t===0){n.push(i);continue}n.push(i.subarray(t-a));continue}if(f){if(r===c){n.push(i);break}n.push(i.subarray(0,r-a));break}n.push(i)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!Oo(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");let s=256,i=new Int32Array(s);for(let l=0;l<s;l++)i[l]=-1;for(let l=0;l<o;l++)i[n[l]]=l;let a=i,c=this.byteLength-n.byteLength,u=n.byteLength-1,f;for(let l=r;l<=c;l+=f){f=0;for(let y=u;y>=0;y--){let P=this.get(l+y);if(n[y]!==P){f=Math.max(1,y-a[P]);break}}if(f===0)return l}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=Ue(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let o=ut(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,r,n),this.write(o,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let o=ut(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,r,n),this.write(o,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let o=ut(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,r,n),this.write(o,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=Ue(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let o=ut(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,r,n),this.write(o,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let o=ut(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,r,n),this.write(o,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let o=ut(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,r,n),this.write(o,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let o=ut(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,r,n),this.write(o,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let o=ut(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,r,n),this.write(o,t)}equals(t){if(t==null||!(t instanceof e)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Se(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new e;return n.bufs=t,r==null&&(r=t.reduce((o,s)=>o+s.byteLength,0)),n.length=r,n}};var gx=parseInt("11111",2),oa=parseInt("10000000",2),wx=parseInt("01111111",2),Ml={0:_n,1:_n,2:xx,3:Sx,4:Ax,5:Ex,6:bx,16:_n,22:_n,48:_n};function wt(e,t={offset:0}){let r=e[t.offset]&gx;if(t.offset++,Ml[r]!=null)return Ml[r](e,t);throw new Error("No decoder for tag "+r)}function Dn(e,t){let r=0;if((e[t.offset]&oa)===oa){let n=e[t.offset]&wx,o="0x";t.offset++;for(let s=0;s<n;s++,t.offset++)o+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(o,16)}else r=e[t.offset],t.offset++;return r}function _n(e,t){Dn(e,t);let r=[];for(;!(t.offset>=e.byteLength);){let n=wt(e,t);if(n===null)break;r.push(n)}return r}function xx(e,t){let r=Dn(e,t),n=t.offset,o=t.offset+r,s=[];for(let i=n;i<o;i++)i===n&&e[i]===0||s.push(e[i]);return t.offset+=r,Uint8Array.from(s)}function bx(e,t){let r=Dn(e,t),n=t.offset+r,o=e[t.offset];t.offset++;let s=0,i=0;o<40?(s=0,i=o):o<80?(s=1,i=o-40):(s=2,i=o-80);let a=`${s}.${i}`,c=[];for(;t.offset<n;){let u=e[t.offset];if(t.offset++,c.push(u&127),u<128){c.reverse();let f=0;for(let l=0;l<c.length;l++)f+=c[l]<<l*7;a+=`.${f}`,c=[]}}return a}function Ex(e,t){return t.offset++,null}function Sx(e,t){let r=Dn(e,t),n=e[t.offset];t.offset++;let o=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function Ax(e,t){let r=Dn(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n}function vx(e){let t=e.toString(16);t.length%2===1&&(t="0"+t);let r=new Ke;for(let n=0;n<t.length;n+=2)r.append(Uint8Array.from([parseInt(`${t[n]}${t[n+1]}`,16)]));return r}function sa(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);let t=vx(e.byteLength);return new Ke(Uint8Array.from([t.byteLength|oa]),t)}function Te(e){let t=new Ke,r=128;return(e.subarray()[0]&r)===r&&t.append(Uint8Array.from([0])),t.append(e),new Ke(Uint8Array.from([2]),sa(t),t)}function Ko(e){let t=Uint8Array.from([0]),r=new Ke(t,e);return new Ke(Uint8Array.from([3]),sa(r),r)}function Ut(e,t=48){let r=new Ke;for(let n of e)r.append(n);return new Ke(Uint8Array.from([t]),sa(r),r)}async function Fl(e,t,r,n){let o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);n?.signal?.throwIfAborted();let s=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,t,r.subarray());return n?.signal?.throwIfAborted(),s}var Ix=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),Cx=Uint8Array.from([6,5,43,129,4,0,34]),Px=Uint8Array.from([6,5,43,129,4,0,35]),Bx={ext:!0,kty:"EC",crv:"P-256"},Tx={ext:!0,kty:"EC",crv:"P-384"},_x={ext:!0,kty:"EC",crv:"P-521"},ia=32,aa=48,ca=66;function fa(e){let t=wt(e);return Vl(t)}function Vl(e){let t=e[1][1][0],r=1,n,o;if(t.byteLength===ia*2+1)return n=H(t.subarray(r,r+ia),"base64url"),o=H(t.subarray(r+ia),"base64url"),new kr({...Bx,key_ops:["verify"],x:n,y:o});if(t.byteLength===aa*2+1)return n=H(t.subarray(r,r+aa),"base64url"),o=H(t.subarray(r+aa),"base64url"),new kr({...Tx,key_ops:["verify"],x:n,y:o});if(t.byteLength===ca*2+1)return n=H(t.subarray(r,r+ca),"base64url"),o=H(t.subarray(r+ca),"base64url"),new kr({..._x,key_ops:["verify"],x:n,y:o});throw new he(`coordinates were wrong length, got ${t.byteLength}, expected 65, 97 or 133`)}function Hl(e){return Ut([Te(Uint8Array.from([1])),Ut([Dx(e.crv)],160),Ut([Ko(new Ke(Uint8Array.from([4]),G(e.x??"","base64url"),G(e.y??"","base64url")))],161)]).subarray()}function Dx(e){if(e==="P-256")return Ix;if(e==="P-384")return Cx;if(e==="P-521")return Px;throw new he(`Invalid curve ${e}`)}var kr=class{type="ECDSA";jwk;_raw;constructor(t){this.jwk=t}get raw(){return this._raw==null&&(this._raw=Hl(this.jwk)),this._raw}toMultihash(){return Be.digest(Rr(this))}toCID(){return A.createV1(114,this.toMultihash())}toString(){return Q.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}async verify(t,r,n){return Fl(this.jwk,r,t,n)}};function Yt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function at(e,t=""){if(!Number.isSafeInteger(e)||e<0){let r=t&&`"${t}" `;throw new Error(`${r}expected integer >= 0, got ${e}`)}}function q(e,t,r=""){let n=Yt(e),o=e?.length,s=t!==void 0;if(!n||s&&o!==t){let i=r&&`"${r}" `,a=s?` of length ${t}`:"",c=n?`length=${o}`:`type=${typeof e}`;throw new Error(i+"expected Uint8Array"+a+", got "+c)}return e}function $o(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash must wrapped by utils.createHasher");at(e.outputLen),at(e.blockLen)}function Lr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ql(e,t){q(e,void 0,"digestInto() output");let r=t.outputLen;if(e.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function bt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Mo(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Je(e,t){return e<<32-t|e>>>t}var zl=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Ux=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Et(e){if(q(e),zl)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=Ux[e[r]];return t}var xt={_0:48,_9:57,A:65,F:70,a:97,f:102};function jl(e){if(e>=xt._0&&e<=xt._9)return e-xt._0;if(e>=xt.A&&e<=xt.F)return e-(xt.A-10);if(e>=xt.a&&e<=xt.f)return e-(xt.a-10)}function St(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(zl)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,s=0;o<r;o++,s+=2){let i=jl(e.charCodeAt(s)),a=jl(e.charCodeAt(s+1));if(i===void 0||a===void 0){let c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[o]=i*16+a}return n}function _e(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];q(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let s=e[n];r.set(s,o),o+=s.length}return r}function ua(e,t={}){let r=(o,s)=>e(s).update(o).digest(),n=e(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=o=>e(o),Object.assign(r,t),Object.freeze(r)}function Or(e=32){let t=typeof globalThis=="object"?globalThis.crypto:null;if(typeof t?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}var la=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])});function Gl(e,t,r){return e&t^~e&r}function Wl(e,t,r){return e&t^e&r^t&r}var Un=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(t,r,n,o){this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=Mo(this.buffer)}update(t){Lr(this),q(t);let{view:r,buffer:n,blockLen:o}=this,s=t.length;for(let i=0;i<s;){let a=Math.min(o-this.pos,s-i);if(a===o){let c=Mo(t);for(;o<=s-i;i+=o)this.process(c,i);continue}n.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Lr(this),ql(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:s}=this,{pos:i}=this;r[i++]=128,bt(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(n,0),i=0);for(let l=i;l<o;l++)r[l]=0;n.setBigUint64(o-8,BigInt(this.length*8),s),this.process(n,0);let a=Mo(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,f[l],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||=new this.constructor,t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:s,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=s,t.length=o,t.pos=a,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}},At=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var be=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Fo=BigInt(4294967295),Zl=BigInt(32);function Nx(e,t=!1){return t?{h:Number(e&Fo),l:Number(e>>Zl&Fo)}:{h:Number(e>>Zl&Fo)|0,l:Number(e&Fo)|0}}function Yl(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let s=0;s<r;s++){let{h:i,l:a}=Nx(e[s],t);[n[s],o[s]]=[i,a]}return[n,o]}var da=(e,t,r)=>e>>>r,pa=(e,t,r)=>e<<32-r|t>>>r,Xt=(e,t,r)=>e>>>r|t<<32-r,Jt=(e,t,r)=>e<<32-r|t>>>r,Nn=(e,t,r)=>e<<64-r|t>>>r-32,kn=(e,t,r)=>e>>>r-32|t<<64-r;function ct(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}var Xl=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Jl=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Ql=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),ed=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,td=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),rd=(e,t,r,n,o,s)=>t+r+n+o+s+(e/2**32|0)|0;var Rx=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nt=new Uint32Array(64),ha=class extends Un{constructor(t){super(64,t,8,!1)}get(){let{A:t,B:r,C:n,D:o,E:s,F:i,G:a,H:c}=this;return[t,r,n,o,s,i,a,c]}set(t,r,n,o,s,i,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Nt[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let y=Nt[l-15],P=Nt[l-2],h=Je(y,7)^Je(y,18)^y>>>3,I=Je(P,17)^Je(P,19)^P>>>10;Nt[l]=I+Nt[l-7]+h+Nt[l-16]|0}let{A:n,B:o,C:s,D:i,E:a,F:c,G:u,H:f}=this;for(let l=0;l<64;l++){let y=Je(a,6)^Je(a,11)^Je(a,25),P=f+y+Gl(a,c,u)+Rx[l]+Nt[l]|0,I=(Je(n,2)^Je(n,13)^Je(n,22))+Wl(n,o,s)|0;f=u,u=c,c=a,a=i+P|0,i=s,s=o,o=n,n=P+I|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,o,s,i,a,c,u,f)}roundClean(){bt(Nt)}destroy(){this.set(0,0,0,0,0,0,0,0),bt(this.buffer)}},ma=class extends ha{A=At[0]|0;B=At[1]|0;C=At[2]|0;D=At[3]|0;E=At[4]|0;F=At[5]|0;G=At[6]|0;H=At[7]|0;constructor(){super(32)}};var nd=Yl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Lx=nd[0],Ox=nd[1],kt=new Uint32Array(80),Rt=new Uint32Array(80),ya=class extends Un{constructor(t){super(128,t,16,!1)}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:s,Cl:i,Dh:a,Dl:c,Eh:u,El:f,Fh:l,Fl:y,Gh:P,Gl:h,Hh:I,Hl:S}=this;return[t,r,n,o,s,i,a,c,u,f,l,y,P,h,I,S]}set(t,r,n,o,s,i,a,c,u,f,l,y,P,h,I,S){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=y|0,this.Gh=P|0,this.Gl=h|0,this.Hh=I|0,this.Hl=S|0}process(t,r){for(let x=0;x<16;x++,r+=4)kt[x]=t.getUint32(r),Rt[x]=t.getUint32(r+=4);for(let x=16;x<80;x++){let T=kt[x-15]|0,k=Rt[x-15]|0,$=Xt(T,k,1)^Xt(T,k,8)^da(T,k,7),M=Jt(T,k,1)^Jt(T,k,8)^pa(T,k,7),v=kt[x-2]|0,C=Rt[x-2]|0,V=Xt(v,C,19)^Nn(v,C,61)^da(v,C,6),z=Jt(v,C,19)^kn(v,C,61)^pa(v,C,6),O=Ql(M,z,Rt[x-7],Rt[x-16]),w=ed(O,$,V,kt[x-7],kt[x-16]);kt[x]=w|0,Rt[x]=O|0}let{Ah:n,Al:o,Bh:s,Bl:i,Ch:a,Cl:c,Dh:u,Dl:f,Eh:l,El:y,Fh:P,Fl:h,Gh:I,Gl:S,Hh:m,Hl:B}=this;for(let x=0;x<80;x++){let T=Xt(l,y,14)^Xt(l,y,18)^Nn(l,y,41),k=Jt(l,y,14)^Jt(l,y,18)^kn(l,y,41),$=l&P^~l&I,M=y&h^~y&S,v=td(B,k,M,Ox[x],Rt[x]),C=rd(v,m,T,$,Lx[x],kt[x]),V=v|0,z=Xt(n,o,28)^Nn(n,o,34)^Nn(n,o,39),O=Jt(n,o,28)^kn(n,o,34)^kn(n,o,39),w=n&s^n&a^s&a,b=o&i^o&c^i&c;m=I|0,B=S|0,I=P|0,S=h|0,P=l|0,h=y|0,{h:l,l:y}=ct(u|0,f|0,C|0,V|0),u=a|0,f=c|0,a=s|0,c=i|0,s=n|0,i=o|0;let g=Xl(V,O,b);n=Jl(g,C,z,w),o=g|0}({h:n,l:o}=ct(this.Ah|0,this.Al|0,n|0,o|0)),{h:s,l:i}=ct(this.Bh|0,this.Bl|0,s|0,i|0),{h:a,l:c}=ct(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=ct(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:y}=ct(this.Eh|0,this.El|0,l|0,y|0),{h:P,l:h}=ct(this.Fh|0,this.Fl|0,P|0,h|0),{h:I,l:S}=ct(this.Gh|0,this.Gl|0,I|0,S|0),{h:m,l:B}=ct(this.Hh|0,this.Hl|0,m|0,B|0),this.set(n,o,s,i,a,c,u,f,l,y,P,h,I,S,m,B)}roundClean(){bt(kt,Rt)}destroy(){bt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},ga=class extends ya{Ah=be[0]|0;Al=be[1]|0;Bh=be[2]|0;Bl=be[3]|0;Ch=be[4]|0;Cl=be[5]|0;Dh=be[6]|0;Dl=be[7]|0;Eh=be[8]|0;El=be[9]|0;Fh=be[10]|0;Fl=be[11]|0;Gh=be[12]|0;Gl=be[13]|0;Hh=be[14]|0;Hl=be[15]|0;constructor(){super(64)}};var Kr=ua(()=>new ma,la(1));var od=ua(()=>new ga,la(3));var xa=BigInt(0),wa=BigInt(1);function vt(e,t=""){if(typeof e!="boolean"){let r=t&&`"${t}" `;throw new Error(r+"expected boolean, got type="+typeof e)}return e}function sd(e){if(typeof e=="bigint"){if(!Vo(e))throw new Error("positive bigint expected, got "+e)}else at(e);return e}function Rn(e){let t=sd(e).toString(16);return t.length&1?"0"+t:t}function id(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?xa:BigInt("0x"+e)}function $r(e){return id(Et(e))}function Qt(e){return id(Et(jo(q(e)).reverse()))}function Ho(e,t){at(t),e=sd(e);let r=St(e.toString(16).padStart(t*2,"0"));if(r.length!==t)throw new Error("number too large");return r}function ba(e,t){return Ho(e,t).reverse()}function jo(e){return Uint8Array.from(e)}var Vo=e=>typeof e=="bigint"&&xa<=e;function Kx(e,t,r){return Vo(e)&&Vo(t)&&Vo(r)&&t<=e&&e<r}function Ln(e,t,r,n){if(!Kx(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Ea(e){let t;for(t=0;e>xa;e>>=wa,t+=1);return t}var On=e=>(wa<<BigInt(e))-wa;function ad(e,t,r){if(at(e,"hashLen"),at(t,"qByteLen"),typeof r!="function")throw new Error("hmacFn must be a function");let n=S=>new Uint8Array(S),o=Uint8Array.of(),s=Uint8Array.of(0),i=Uint8Array.of(1),a=1e3,c=n(e),u=n(e),f=0,l=()=>{c.fill(1),u.fill(0),f=0},y=(...S)=>r(u,_e(c,...S)),P=(S=o)=>{u=y(s,S),c=y(),S.length!==0&&(u=y(i,S),c=y())},h=()=>{if(f++>=a)throw new Error("drbg: tried max amount of iterations");let S=0,m=[];for(;S<t;){c=y();let B=c.slice();m.push(B),S+=c.length}return _e(...m)};return(S,m)=>{l(),P(S);let B;for(;!(B=m(h()));)P();return l(),B}}function Lt(e,t={},r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(s,i,a){let c=e[s];if(a&&c===void 0)return;let u=typeof c;if(u!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${u}`)}let o=(s,i)=>Object.entries(s).forEach(([a,c])=>n(a,c,i));o(t,!1),o(r,!0)}function Mr(e){let t=new WeakMap;return(r,...n)=>{let o=t.get(r);if(o!==void 0)return o;let s=e(r,...n);return t.set(r,s),s}}var Pe=BigInt(0),me=BigInt(1),er=BigInt(2),ud=BigInt(3),ld=BigInt(4),dd=BigInt(5),$x=BigInt(7),pd=BigInt(8),Mx=BigInt(9),hd=BigInt(16);function ae(e,t){let r=e%t;return r>=Pe?r:t+r}function te(e,t,r){let n=e;for(;t-- >Pe;)n*=n,n%=r;return n}function cd(e,t){if(e===Pe)throw new Error("invert: expected non-zero number");if(t<=Pe)throw new Error("invert: expected positive modulus, got "+t);let r=ae(e,t),n=t,o=Pe,s=me,i=me,a=Pe;for(;r!==Pe;){let u=n/r,f=n%r,l=o-i*u,y=s-a*u;n=r,r=f,o=i,s=a,i=l,a=y}if(n!==me)throw new Error("invert: does not exist");return ae(o,t)}function Aa(e,t,r){if(!e.eql(e.sqr(t),r))throw new Error("Cannot find square root")}function md(e,t){let r=(e.ORDER+me)/ld,n=e.pow(t,r);return Aa(e,n,t),n}function Fx(e,t){let r=(e.ORDER-dd)/pd,n=e.mul(t,er),o=e.pow(n,r),s=e.mul(t,o),i=e.mul(e.mul(s,er),o),a=e.mul(s,e.sub(i,e.ONE));return Aa(e,a,t),a}function Vx(e){let t=Fr(e),r=yd(e),n=r(t,t.neg(t.ONE)),o=r(t,n),s=r(t,t.neg(n)),i=(e+$x)/hd;return(a,c)=>{let u=a.pow(c,i),f=a.mul(u,n),l=a.mul(u,o),y=a.mul(u,s),P=a.eql(a.sqr(f),c),h=a.eql(a.sqr(l),c);u=a.cmov(u,f,P),f=a.cmov(y,l,h);let I=a.eql(a.sqr(f),c),S=a.cmov(u,f,I);return Aa(a,S,c),S}}function yd(e){if(e<ud)throw new Error("sqrt is not defined for small field");let t=e-me,r=0;for(;t%er===Pe;)t/=er,r++;let n=er,o=Fr(e);for(;fd(o,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return md;let s=o.pow(n,t),i=(t+me)/er;return function(c,u){if(c.is0(u))return u;if(fd(c,u)!==1)throw new Error("Cannot find square root");let f=r,l=c.mul(c.ONE,s),y=c.pow(u,t),P=c.pow(u,i);for(;!c.eql(y,c.ONE);){if(c.is0(y))return c.ZERO;let h=1,I=c.sqr(y);for(;!c.eql(I,c.ONE);)if(h++,I=c.sqr(I),h===f)throw new Error("Cannot find square root");let S=me<<BigInt(f-h-1),m=c.pow(l,S);f=h,l=c.sqr(m),y=c.mul(y,l),P=c.mul(P,m)}return P}}function Hx(e){return e%ld===ud?md:e%pd===dd?Fx:e%hd===Mx?Vx(e):yd(e)}var gd=(e,t)=>(ae(e,t)&me)===me,jx=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function va(e){let t={ORDER:"bigint",BYTES:"number",BITS:"number"},r=jx.reduce((n,o)=>(n[o]="function",n),t);return Lt(e,r),e}function qx(e,t,r){if(r<Pe)throw new Error("invalid exponent, negatives unsupported");if(r===Pe)return e.ONE;if(r===me)return t;let n=e.ONE,o=t;for(;r>Pe;)r&me&&(n=e.mul(n,o)),o=e.sqr(o),r>>=me;return n}function Kn(e,t,r=!1){let n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((i,a,c)=>e.is0(a)?i:(n[c]=i,e.mul(i,a)),e.ONE),s=e.inv(o);return t.reduceRight((i,a,c)=>e.is0(a)?i:(n[c]=e.mul(i,n[c]),e.mul(i,a)),s),n}function fd(e,t){let r=(e.ORDER-me)/er,n=e.pow(t,r),o=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),i=e.eql(n,e.neg(e.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function zx(e,t){t!==void 0&&at(t);let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}var Sa=class{ORDER;BITS;BYTES;isLE;ZERO=Pe;ONE=me;_lengths;_sqrt;_mod;constructor(t,r={}){if(t<=Pe)throw new Error("invalid field: expected ORDER > 0, got "+t);let n;this.isLE=!1,r!=null&&typeof r=="object"&&(typeof r.BITS=="number"&&(n=r.BITS),typeof r.sqrt=="function"&&(this.sqrt=r.sqrt),typeof r.isLE=="boolean"&&(this.isLE=r.isLE),r.allowedLengths&&(this._lengths=r.allowedLengths?.slice()),typeof r.modFromBytes=="boolean"&&(this._mod=r.modFromBytes));let{nBitLength:o,nByteLength:s}=zx(t,n);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=t,this.BITS=o,this.BYTES=s,this._sqrt=void 0,Object.preventExtensions(this)}create(t){return ae(t,this.ORDER)}isValid(t){if(typeof t!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof t);return Pe<=t&&t<this.ORDER}is0(t){return t===Pe}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}isOdd(t){return(t&me)===me}neg(t){return ae(-t,this.ORDER)}eql(t,r){return t===r}sqr(t){return ae(t*t,this.ORDER)}add(t,r){return ae(t+r,this.ORDER)}sub(t,r){return ae(t-r,this.ORDER)}mul(t,r){return ae(t*r,this.ORDER)}pow(t,r){return qx(this,t,r)}div(t,r){return ae(t*cd(r,this.ORDER),this.ORDER)}sqrN(t){return t*t}addN(t,r){return t+r}subN(t,r){return t-r}mulN(t,r){return t*r}inv(t){return cd(t,this.ORDER)}sqrt(t){return this._sqrt||(this._sqrt=Hx(this.ORDER)),this._sqrt(this,t)}toBytes(t){return this.isLE?ba(t,this.BYTES):Ho(t,this.BYTES)}fromBytes(t,r=!1){q(t);let{_lengths:n,BYTES:o,isLE:s,ORDER:i,_mod:a}=this;if(n){if(!n.includes(t.length)||t.length>o)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+t.length);let u=new Uint8Array(o);u.set(t,s?0:u.length-t.length),t=u}if(t.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+t.length);let c=s?Qt(t):$r(t);if(a&&(c=ae(c,i)),!r&&!this.isValid(c))throw new Error("invalid field element: outside of range 0..ORDER");return c}invertBatch(t){return Kn(this,t)}cmov(t,r,n){return n?r:t}};function Fr(e,t={}){return new Sa(e,t)}function wd(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Ia(e){let t=wd(e);return t+Math.ceil(t/2)}function Ca(e,t,r=!1){q(e);let n=e.length,o=wd(t),s=Ia(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);let i=r?Qt(e):$r(e),a=ae(i,t-me)+me;return r?ba(a,o):Ho(a,o)}var Vr=BigInt(0),tr=BigInt(1);function $n(e,t){let r=t.negate();return e?r:t}function rr(e,t){let r=Kn(e.Fp,t.map(n=>n.Z));return t.map((n,o)=>e.fromAffine(n.toAffine(r[o])))}function Sd(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Pa(e,t){Sd(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),o=2**e,s=On(e),i=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:o,shiftBy:i}}function xd(e,t,r){let{windowSize:n,mask:o,maxNumber:s,shiftBy:i}=r,a=Number(e&o),c=e>>i;a>n&&(a-=s,c+=tr);let u=t*n,f=u+Math.abs(a)-1,l=a===0,y=a<0,P=t%2!==0;return{nextN:c,offset:f,isZero:l,isNeg:y,isNegF:P,offsetF:u}}var Ba=new WeakMap,Ad=new WeakMap;function Ta(e){return Ad.get(e)||1}function bd(e){if(e!==Vr)throw new Error("invalid wNAF")}var Hr=class{BASE;ZERO;Fn;bits;constructor(t,r){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=r}_unsafeLadder(t,r,n=this.ZERO){let o=t;for(;r>Vr;)r&tr&&(n=n.add(o)),o=o.double(),r>>=tr;return n}precomputeWindow(t,r){let{windows:n,windowSize:o}=Pa(r,this.bits),s=[],i=t,a=i;for(let c=0;c<n;c++){a=i,s.push(a);for(let u=1;u<o;u++)a=a.add(i),s.push(a);i=a.double()}return s}wNAF(t,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let o=this.ZERO,s=this.BASE,i=Pa(t,this.bits);for(let a=0;a<i.windows;a++){let{nextN:c,offset:u,isZero:f,isNeg:l,isNegF:y,offsetF:P}=xd(n,a,i);n=c,f?s=s.add($n(y,r[P])):o=o.add($n(l,r[u]))}return bd(n),{p:o,f:s}}wNAFUnsafe(t,r,n,o=this.ZERO){let s=Pa(t,this.bits);for(let i=0;i<s.windows&&n!==Vr;i++){let{nextN:a,offset:c,isZero:u,isNeg:f}=xd(n,i,s);if(n=a,!u){let l=r[c];o=o.add(f?l.negate():l)}}return bd(n),o}getPrecomputes(t,r,n){let o=Ba.get(r);return o||(o=this.precomputeWindow(r,t),t!==1&&(typeof n=="function"&&(o=n(o)),Ba.set(r,o))),o}cached(t,r,n){let o=Ta(t);return this.wNAF(o,this.getPrecomputes(o,t,n),r)}unsafe(t,r,n,o){let s=Ta(t);return s===1?this._unsafeLadder(t,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,t,n),r,o)}createCache(t,r){Sd(r,this.bits),Ad.set(t,r),Ba.delete(t)}hasCache(t){return Ta(t)!==1}};function vd(e,t,r,n){let o=t,s=e.ZERO,i=e.ZERO;for(;r>Vr||n>Vr;)r&tr&&(s=s.add(o)),n&tr&&(i=i.add(o)),o=o.double(),r>>=tr,n>>=tr;return{p1:s,p2:i}}function Ed(e,t,r){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return va(t),t}else return Fr(e,{isLE:r})}function qo(e,t,r={},n){if(n===void 0&&(n=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(let c of["p","n","h"]){let u=t[c];if(!(typeof u=="bigint"&&u>Vr))throw new Error(`CURVE.${c} must be positive bigint`)}let o=Ed(t.p,r.Fp,n),s=Ed(t.n,r.Fn,n),a=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(let c of a)if(!o.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:s}}function zo(e,t){return function(n){let o=e(n);return{secretKey:o,publicKey:t(o)}}}var Ot=BigInt(0),ye=BigInt(1),_a=BigInt(2),Gx=BigInt(8);function Wx(e,t,r,n){let o=e.sqr(r),s=e.sqr(n),i=e.add(e.mul(t.a,o),s),a=e.add(e.ONE,e.mul(t.d,e.mul(o,s)));return e.eql(i,a)}function Id(e,t={}){let r=qo("edwards",e,t,t.FpFnLE),{Fp:n,Fn:o}=r,s=r.CURVE,{h:i}=s;Lt(t,{},{uvRatio:"function"});let a=_a<<BigInt(o.BYTES*8)-ye,c=S=>n.create(S),u=t.uvRatio||((S,m)=>{try{return{isValid:!0,value:n.sqrt(n.div(S,m))}}catch{return{isValid:!1,value:Ot}}});if(!Wx(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function f(S,m,B=!1){let x=B?ye:Ot;return Ln("coordinate "+S,m,x,a),m}function l(S){if(!(S instanceof h))throw new Error("EdwardsPoint expected")}let y=Mr((S,m)=>{let{X:B,Y:x,Z:T}=S,k=S.is0();m==null&&(m=k?Gx:n.inv(T));let $=c(B*m),M=c(x*m),v=n.mul(T,m);if(k)return{x:Ot,y:ye};if(v!==ye)throw new Error("invZ was invalid");return{x:$,y:M}}),P=Mr(S=>{let{a:m,d:B}=s;if(S.is0())throw new Error("bad point: ZERO");let{X:x,Y:T,Z:k,T:$}=S,M=c(x*x),v=c(T*T),C=c(k*k),V=c(C*C),z=c(M*m),O=c(C*c(z+v)),w=c(V+c(B*c(M*v)));if(O!==w)throw new Error("bad point: equation left != right (1)");let b=c(x*T),g=c(k*$);if(b!==g)throw new Error("bad point: equation left != right (2)");return!0});class h{static BASE=new h(s.Gx,s.Gy,ye,c(s.Gx*s.Gy));static ZERO=new h(Ot,ye,ye,Ot);static Fp=n;static Fn=o;X;Y;Z;T;constructor(m,B,x,T){this.X=f("x",m),this.Y=f("y",B),this.Z=f("z",x,!0),this.T=f("t",T),Object.freeze(this)}static CURVE(){return s}static fromAffine(m){if(m instanceof h)throw new Error("extended point not allowed");let{x:B,y:x}=m||{};return f("x",B),f("y",x),new h(B,x,ye,c(B*x))}static fromBytes(m,B=!1){let x=n.BYTES,{a:T,d:k}=s;m=jo(q(m,x,"point")),vt(B,"zip215");let $=jo(m),M=m[x-1];$[x-1]=M&-129;let v=Qt($),C=B?a:n.ORDER;Ln("point.y",v,Ot,C);let V=c(v*v),z=c(V-ye),O=c(k*V-T),{isValid:w,value:b}=u(z,O);if(!w)throw new Error("bad point: invalid y coordinate");let g=(b&ye)===ye,D=(M&128)!==0;if(!B&&b===Ot&&D)throw new Error("bad point: x=0 and x_0=1");return D!==g&&(b=c(-b)),h.fromAffine({x:b,y:v})}static fromHex(m,B=!1){return h.fromBytes(St(m),B)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,B=!0){return I.createCache(this,m),B||this.multiply(_a),this}assertValidity(){P(this)}equals(m){l(m);let{X:B,Y:x,Z:T}=this,{X:k,Y:$,Z:M}=m,v=c(B*M),C=c(k*T),V=c(x*M),z=c($*T);return v===C&&V===z}is0(){return this.equals(h.ZERO)}negate(){return new h(c(-this.X),this.Y,this.Z,c(-this.T))}double(){let{a:m}=s,{X:B,Y:x,Z:T}=this,k=c(B*B),$=c(x*x),M=c(_a*c(T*T)),v=c(m*k),C=B+x,V=c(c(C*C)-k-$),z=v+$,O=z-M,w=v-$,b=c(V*O),g=c(z*w),D=c(V*w),N=c(O*z);return new h(b,g,N,D)}add(m){l(m);let{a:B,d:x}=s,{X:T,Y:k,Z:$,T:M}=this,{X:v,Y:C,Z:V,T:z}=m,O=c(T*v),w=c(k*C),b=c(M*x*z),g=c($*V),D=c((T+k)*(v+C)-O-w),N=g-b,L=g+b,K=c(w-B*O),R=c(D*N),F=c(L*K),j=c(D*K),ne=c(N*L);return new h(R,F,ne,j)}subtract(m){return this.add(m.negate())}multiply(m){if(!o.isValidNot0(m))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:B,f:x}=I.cached(this,m,T=>rr(h,T));return rr(h,[B,x])[0]}multiplyUnsafe(m,B=h.ZERO){if(!o.isValid(m))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return m===Ot?h.ZERO:this.is0()||m===ye?this:I.unsafe(this,m,x=>rr(h,x),B)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return I.unsafe(this,s.n).is0()}toAffine(m){return y(this,m)}clearCofactor(){return i===ye?this:this.multiplyUnsafe(i)}toBytes(){let{x:m,y:B}=this.toAffine(),x=n.toBytes(B);return x[x.length-1]|=m&ye?128:0,x}toHex(){return Et(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let I=new Hr(h,o.BITS);return h.BASE.precompute(8),h}function Cd(e,t,r={}){if(typeof t!="function")throw new Error('"hash" function param is required');Lt(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:o,Fp:s,Fn:i}=e,a=r.randomBytes||Or,c=r.adjustScalarBytes||(v=>v),u=r.domain||((v,C,V)=>{if(vt(V,"phflag"),C.length||V)throw new Error("Contexts/pre-hash are not supported");return v});function f(v){return i.create(Qt(v))}function l(v){let C=x.secretKey;q(v,x.secretKey,"secretKey");let V=q(t(v),2*C,"hashedSecretKey"),z=c(V.slice(0,C)),O=V.slice(C,2*C),w=f(z);return{head:z,prefix:O,scalar:w}}function y(v){let{head:C,prefix:V,scalar:z}=l(v),O=o.multiply(z),w=O.toBytes();return{head:C,prefix:V,scalar:z,point:O,pointBytes:w}}function P(v){return y(v).pointBytes}function h(v=Uint8Array.of(),...C){let V=_e(...C);return f(t(u(V,q(v,void 0,"context"),!!n)))}function I(v,C,V={}){v=q(v,void 0,"message"),n&&(v=n(v));let{prefix:z,scalar:O,pointBytes:w}=y(C),b=h(V.context,z,v),g=o.multiply(b).toBytes(),D=h(V.context,g,w,v),N=i.create(b+D*O);if(!i.isValid(N))throw new Error("sign failed: invalid s");let L=_e(g,i.toBytes(N));return q(L,x.signature,"result")}let S={zip215:!0};function m(v,C,V,z=S){let{context:O,zip215:w}=z,b=x.signature;v=q(v,b,"signature"),C=q(C,void 0,"message"),V=q(V,x.publicKey,"publicKey"),w!==void 0&&vt(w,"zip215"),n&&(C=n(C));let g=b/2,D=v.subarray(0,g),N=Qt(v.subarray(g,b)),L,K,R;try{L=e.fromBytes(V,w),K=e.fromBytes(D,w),R=o.multiplyUnsafe(N)}catch{return!1}if(!w&&L.isSmallOrder())return!1;let F=h(O,K.toBytes(),L.toBytes(),C);return K.add(L.multiplyUnsafe(F)).subtract(R).clearCofactor().is0()}let B=s.BYTES,x={secretKey:B,publicKey:B,signature:2*B,seed:B};function T(v=a(x.seed)){return q(v,x.seed,"seed")}function k(v){return Yt(v)&&v.length===i.BYTES}function $(v,C){try{return!!e.fromBytes(v,C)}catch{return!1}}let M={getExtendedPublicKey:y,randomSecretKey:T,isValidSecretKey:k,isValidPublicKey:$,toMontgomery(v){let{y:C}=e.fromBytes(v),V=x.publicKey,z=V===32;if(!z&&V!==57)throw new Error("only defined for 25519 and 448");let O=z?s.div(ye+C,ye-C):s.div(C-ye,C+ye);return s.toBytes(O)},toMontgomerySecret(v){let C=x.secretKey;q(v,C);let V=t(v.subarray(0,C));return c(V).subarray(0,C)}};return Object.freeze({keygen:zo(T,P),getPublicKey:P,sign:I,verify:m,utils:M,Point:e,lengths:x})}var Zx=BigInt(1),Pd=BigInt(2);var Yx=BigInt(5),Xx=BigInt(8),Da=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Jx={p:Da,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Xx,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Qx(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),s=Da,a=e*e%s*e%s,c=te(a,Pd,s)*a%s,u=te(c,Zx,s)*e%s,f=te(u,Yx,s)*u%s,l=te(f,t,s)*f%s,y=te(l,r,s)*l%s,P=te(y,n,s)*y%s,h=te(P,o,s)*P%s,I=te(h,o,s)*P%s,S=te(I,t,s)*f%s;return{pow_p_5_8:te(S,Pd,s)*e%s,b2:a}}function eb(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}var Bd=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function tb(e,t){let r=Da,n=ae(t*t*t,r),o=ae(n*n*t,r),s=Qx(e*o).pow_p_5_8,i=ae(e*n*s,r),a=ae(t*i*i,r),c=i,u=ae(i*Bd,r),f=a===e,l=a===ae(-e,r),y=a===ae(-e*Bd,r);return f&&(i=c),(l||y)&&(i=u),gd(i,r)&&(i=ae(-i,r)),{isValid:f||l,value:i}}var rb=Id(Jx,{uvRatio:tb});function nb(e){return Cd(rb,od,Object.assign({adjustScalarBytes:eb},e))}var Td=nb({});var Mn=class extends Error{constructor(t="An error occurred while verifying a message"){super(t),this.name="VerificationError"}},Go=class extends Error{constructor(t="Missing Web Crypto API"){super(t),this.name="WebCryptoMissingError"}};var _d={get(e=globalThis){let t=e.crypto;if(t?.subtle==null)throw new Go("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}};var He=_d;var Wo=32;var Ua,ob=(async()=>{try{return await He.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function sb(e,t,r){if(e.buffer instanceof ArrayBuffer){let n=await He.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await He.get().subtle.verify({name:"Ed25519"},n,t,r instanceof Uint8Array?r:r.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function ib(e,t,r){return Td.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}async function Dd(e,t,r){return Ua==null&&(Ua=await ob),Ua?sb(e,t,r):ib(e,t,r)}function Zo(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}var Yo=class{type="Ed25519";raw;constructor(t){this.raw=Na(t,Wo)}toMultihash(){return Be.digest(Rr(this))}toCID(){return A.createV1(114,this.toMultihash())}toString(){return Q.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}verify(t,r,n){n?.signal?.throwIfAborted();let o=Dd(this.raw,r,t);return Zo(o)?o.then(s=>(n?.signal?.throwIfAborted(),s)):o}};function ka(e){return e=Na(e,Wo),new Yo(e)}function Na(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new he(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}var Ra=new Float32Array([-0]),Kt=new Uint8Array(Ra.buffer);function Nd(e,t,r){Ra[0]=e,t[r]=Kt[0],t[r+1]=Kt[1],t[r+2]=Kt[2],t[r+3]=Kt[3]}function kd(e,t){return Kt[0]=e[t],Kt[1]=e[t+1],Kt[2]=e[t+2],Kt[3]=e[t+3],Ra[0]}var La=new Float64Array([-0]),Ie=new Uint8Array(La.buffer);function Rd(e,t,r){La[0]=e,t[r]=Ie[0],t[r+1]=Ie[1],t[r+2]=Ie[2],t[r+3]=Ie[3],t[r+4]=Ie[4],t[r+5]=Ie[5],t[r+6]=Ie[6],t[r+7]=Ie[7]}function Ld(e,t){return Ie[0]=e[t],Ie[1]=e[t+1],Ie[2]=e[t+2],Ie[3]=e[t+3],Ie[4]=e[t+4],Ie[5]=e[t+5],Ie[6]=e[t+6],Ie[7]=e[t+7],La[0]}var cb=BigInt(Number.MAX_SAFE_INTEGER),fb=BigInt(Number.MIN_SAFE_INTEGER),$e=class e{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){let t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return nr;if(t<cb&&t>fb)return this.fromNumber(Number(t));let r=t<0n;r&&(t=-t);let n=t>>32n,o=t-(n<<32n);return r&&(n=~n|0n,o=~o|0n,++o>Od&&(o=0n,++n>Od&&(n=0n))),new e(Number(o),Number(n))}static fromNumber(t){if(t===0)return nr;let r=t<0;r&&(t=-t);let n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new e(n,o)}static from(t){return typeof t=="number"?e.fromNumber(t):typeof t=="bigint"?e.fromBigInt(t):typeof t=="string"?e.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new e(t.low>>>0,t.high>>>0):nr}},nr=new $e(0,0);nr.toBigInt=function(){return 0n};nr.zzEncode=nr.zzDecode=function(){return this};nr.length=function(){return 1};var Od=4294967296n;function Kd(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function $d(e,t,r){if(r-t<1)return"";let o,s=[],i=0,a;for(;t<r;)a=e[t++],a<128?s[i++]=a:a>191&&a<224?s[i++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[i++]=55296+(a>>10),s[i++]=56320+(a&1023)):s[i++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,i>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o!=null?(i>0&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))}function Oa(e,t,r){let n=r,o,s;for(let i=0;i<e.length;++i)o=e.charCodeAt(i),o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++i,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128);return r-n}function Qe(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Xo(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}var Ka=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Qe(this,10);return t}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Qe(this,4);return Xo(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Qe(this,4);return Xo(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Qe(this,4);let t=kd(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw Qe(this,4);let t=Ld(this.buf,this.pos);return this.pos+=8,t}bytes(){let t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Qe(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let t=this.bytes();return $d(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Qe(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Qe(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){let t=new $e(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Qe(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw Qe(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Qe(this,8);let t=Xo(this.buf,this.pos+=4),r=Xo(this.buf,this.pos+=4);return new $e(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let t=si(this.buf,this.pos);return this.pos+=st(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function $a(e){return new Ka(e instanceof Uint8Array?e:e.subarray())}function Jo(e,t,r){let n=$a(e);return t.decode(n,void 0,r)}function Ma(e){let t=e??8192,r=t>>>1,n,o=t;return function(i){if(i<1||i>r)return Ue(i);o+i>t&&(n=Ue(t),o=0);let a=n.subarray(o,o+=i);return(o&7)!==0&&(o=(o|7)+1),a}}var or=class{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}};function Fa(){}var Ha=class{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}},ub=Ma();function lb(e){return globalThis.Buffer!=null?Ue(e):ub(e)}var Vn=class{len;head;tail;states;constructor(){this.len=0,this.head=new or(Fa,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new or(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new ja((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(Qo,10,$e.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){let r=$e.fromBigInt(t);return this._push(Qo,r.length(),r)}uint64Number(t){return this._push(fn,st(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){let r=$e.fromBigInt(t).zzEncode();return this._push(Qo,r.length(),r)}sint64Number(t){let r=$e.fromNumber(t).zzEncode();return this._push(Qo,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(Va,1,t?1:0)}fixed32(t){return this._push(Fn,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){let r=$e.fromBigInt(t);return this._push(Fn,4,r.lo)._push(Fn,4,r.hi)}fixed64Number(t){let r=$e.fromNumber(t);return this._push(Fn,4,r.lo)._push(Fn,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(Nd,4,t)}double(t){return this._push(Rd,8,t)}bytes(t){let r=t.length>>>0;return r===0?this._push(Va,1,0):this.uint32(r)._push(pb,r,t)}string(t){let r=Kd(t);return r!==0?this.uint32(r)._push(Oa,r,t):this._push(Va,1,0)}fork(){return this.states=new Ha(this),this.head=this.tail=new or(Fa,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new or(Fa,0,0),this.len=0),this}ldelim(){let t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next,r=lb(this.len),n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}};function Va(e,t,r){t[r]=e&255}function db(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}var ja=class extends or{next;constructor(t,r){super(db,t,r),this.next=void 0}};function Qo(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function Fn(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function pb(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(Vn.prototype.bytes=function(e){let t=e.length>>>0;return this.uint32(t),t>0&&this._push(hb,t,e),this},Vn.prototype.string=function(e){let t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(mb,t,e),this});function hb(e,t,r){t.set(e,r)}function mb(e,t,r){e.length<40?Oa(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(G(e),r)}function qa(){return new Vn}function es(e,t){let r=qa();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var jr;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(jr||(jr={}));function ts(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function za(e){function t(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}let r=function(s,i){let a=t(s);i.int32(a)},n=function(s){let i=s.int32();return t(i)};return ts("enum",jr.VARINT,r,n)}function rs(e,t){return ts("message",jr.LENGTH_DELIMITED,e,t)}var ce;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(ce||(ce={}));var Ga;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Ga||(Ga={}));(function(e){e.codec=()=>za(Ga)})(ce||(ce={}));var ft;(function(e){let t;e.codec=()=>(t==null&&(t=rs((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),ce.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=ce.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),t),e.encode=r=>es(r,e.codec()),e.decode=(r,n)=>Jo(r,e.codec(),n)})(ft||(ft={}));var Wa;(function(e){let t;e.codec=()=>(t==null&&(t=rs((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),ce.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=ce.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),t),e.encode=r=>es(r,e.codec()),e.decode=(r,n)=>Jo(r,e.codec(),n)})(Wa||(Wa={}));var jn={};fe(jn,{MAX_RSA_KEY_SIZE:()=>Za,generateRSAKeyPair:()=>qd,jwkToJWKKeyPair:()=>zd,jwkToPkcs1:()=>xb,jwkToPkix:()=>Qa,jwkToRSAPrivateKey:()=>nc,pkcs1MessageToJwk:()=>Xa,pkcs1MessageToRSAPrivateKey:()=>ec,pkcs1ToJwk:()=>wb,pkcs1ToRSAPrivateKey:()=>jd,pkixMessageToJwk:()=>Ja,pkixMessageToRSAPublicKey:()=>rc,pkixToJwk:()=>bb,pkixToRSAPublicKey:()=>tc});var qr=class{type="RSA";jwk;_raw;_multihash;constructor(t,r){this.jwk=t,this._multihash=r}get raw(){return this._raw==null&&(this._raw=jn.jwkToPkix(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return A.createV1(114,this._multihash)}toString(){return Q.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}verify(t,r,n){return Hd(this.jwk,r,t,n)}},Hn=class{type="RSA";jwk;_raw;publicKey;constructor(t,r){this.jwk=t,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=jn.jwkToPkcs1(this.jwk)),this._raw}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}sign(t,r){return Vd(this.jwk,t,r)}};var Za=8192,Ya=18,yb=1062,gb=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function wb(e){let t=wt(e);return Xa(t)}function Xa(e){return{n:H(e[1],"base64url"),e:H(e[2],"base64url"),d:H(e[3],"base64url"),p:H(e[4],"base64url"),q:H(e[5],"base64url"),dp:H(e[6],"base64url"),dq:H(e[7],"base64url"),qi:H(e[8],"base64url"),kty:"RSA"}}function xb(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new he("JWK was missing components");return Ut([Te(Uint8Array.from([0])),Te(G(e.n,"base64url")),Te(G(e.e,"base64url")),Te(G(e.d,"base64url")),Te(G(e.p,"base64url")),Te(G(e.q,"base64url")),Te(G(e.dp,"base64url")),Te(G(e.dq,"base64url")),Te(G(e.qi,"base64url"))]).subarray()}function bb(e){let t=wt(e,{offset:0});return Ja(t)}function Ja(e){let t=wt(e[1],{offset:0});return{kty:"RSA",n:H(t[0],"base64url"),e:H(t[1],"base64url")}}function Qa(e){if(e.n==null||e.e==null)throw new he("JWK was missing components");return Ut([gb,Ko(Ut([Te(G(e.n,"base64url")),Te(G(e.e,"base64url"))]))]).subarray()}function jd(e){let t=wt(e);return ec(t)}function ec(e){let t=Xa(e);return nc(t)}function tc(e,t){if(e.byteLength>=yb)throw new Nr("Key size is too large");let r=wt(e,{offset:0});return rc(r,e,t)}function rc(e,t,r){let n=Ja(e);if(r==null){let o=Kr(ft.encode({Type:ce.RSA,Data:t}));r=ot(Ya,o)}return new qr(n,r)}function nc(e){if(Wd(e)>Za)throw new he("Key size is too large");let t=zd(e),r=Kr(ft.encode({Type:ce.RSA,Data:Qa(t.publicKey)})),n=ot(Ya,r);return new Hn(t.privateKey,new qr(t.publicKey,n))}async function qd(e){if(e>Za)throw new he("Key size is too large");let t=await Gd(e),r=Kr(ft.encode({Type:ce.RSA,Data:Qa(t.publicKey)})),n=ot(Ya,r);return new Hn(t.privateKey,new qr(t.publicKey,n))}function zd(e){if(e==null)throw new he("Missing key parameter");return{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}}}async function Gd(e,t){let r=await He.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);t?.signal?.throwIfAborted();let n=await Eb(r,t);return{privateKey:n[0],publicKey:n[1]}}async function Vd(e,t,r){let n=await He.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);r?.signal?.throwIfAborted();let o=await He.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,t instanceof Uint8Array?t:t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(o,0,o.byteLength)}async function Hd(e,t,r,n){let o=await He.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);n?.signal?.throwIfAborted();let s=await He.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,t,r instanceof Uint8Array?r:r.subarray());return n?.signal?.throwIfAborted(),s}async function Eb(e,t){if(e.privateKey==null||e.publicKey==null)throw new he("Private and public key are required");let r=await Promise.all([He.get().subtle.exportKey("jwk",e.privateKey),He.get().subtle.exportKey("jwk",e.publicKey)]);return t?.signal?.throwIfAborted(),r}function Wd(e){if(e.kty!=="RSA")throw new he("invalid key type");if(e.n==null)throw new he("invalid key modulus");return G(e.n,"base64url").length*8}var ns=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(t,r){if($o(t),q(r,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,o=new Uint8Array(n);o.set(r.length>n?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),bt(o)}update(t){return Lr(this),this.iHash.update(t),this}digestInto(t){Lr(this),q(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||=Object.create(Object.getPrototypeOf(this),{});let{oHash:r,iHash:n,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},oc=(e,t,r)=>new ns(e,t).update(r).digest();oc.create=(e,t)=>new ns(e,t);var Zd=(e,t)=>(e+(e>=0?t:-t)/Yd)/t;function Sb(e,t,r){let[[n,o],[s,i]]=t,a=Zd(i*e,r),c=Zd(-o*e,r),u=e-a*n-c*s,f=-a*o-c*i,l=u<It,y=f<It;l&&(u=-u),y&&(f=-f);let P=On(Math.ceil(Ea(r)/2))+zr;if(u<It||u>=P||f<It||f>=P)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:l,k1:u,k2neg:y,k2:f}}function ic(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function sc(e,t){let r={};for(let n of Object.keys(t))r[n]=e[n]===void 0?t[n]:e[n];return vt(r.lowS,"lowS"),vt(r.prehash,"prehash"),r.format!==void 0&&ic(r.format),r}var ac=class extends Error{constructor(t=""){super(t)}},$t={Err:ac,_tlv:{encode:(e,t)=>{let{Err:r}=$t;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=Rn(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?Rn(o.length/2|128):"";return Rn(e)+s+o+t},decode(e,t){let{Err:r}=$t,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let o=t[n++],s=!!(o&128),i=0;if(!s)i=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let u=t.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let f of u)i=i<<8|f;if(n+=c,i<128)throw new r("tlv.decode(long): not minimal encoding")}let a=t.subarray(n,n+i);if(a.length!==i)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+i)}}},_int:{encode(e){let{Err:t}=$t;if(e<It)throw new t("integer: negative integers are not allowed");let r=Rn(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=$t;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return $r(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=$t,o=q(e,void 0,"signature"),{v:s,l:i}=n.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,s),{v:u,l:f}=n.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=$t,n=t.encode(2,r.encode(e.r)),o=t.encode(2,r.encode(e.s)),s=n+o;return t.encode(48,s)}},It=BigInt(0),zr=BigInt(1),Yd=BigInt(2),os=BigInt(3),Ab=BigInt(4);function Xd(e,t={}){let r=qo("weierstrass",e,t),{Fp:n,Fn:o}=r,s=r.CURVE,{h:i,n:a}=s;Lt(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});let{endo:c}=t;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let u=Qd(n,o);function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(O,w,b){let{x:g,y:D}=w.toAffine(),N=n.toBytes(g);if(vt(b,"isCompressed"),b){f();let L=!n.isOdd(D);return _e(Jd(L),N)}else return _e(Uint8Array.of(4),N,n.toBytes(D))}function y(O){q(O,void 0,"Point");let{publicKey:w,publicKeyUncompressed:b}=u,g=O.length,D=O[0],N=O.subarray(1);if(g===w&&(D===2||D===3)){let L=n.fromBytes(N);if(!n.isValid(L))throw new Error("bad point: is not on curve, wrong x");let K=I(L),R;try{R=n.sqrt(K)}catch(ne){let ee=ne instanceof Error?": "+ne.message:"";throw new Error("bad point: is not on curve, sqrt error"+ee)}f();let F=n.isOdd(R);return(D&1)===1!==F&&(R=n.neg(R)),{x:L,y:R}}else if(g===b&&D===4){let L=n.BYTES,K=n.fromBytes(N.subarray(0,L)),R=n.fromBytes(N.subarray(L,L*2));if(!S(K,R))throw new Error("bad point: is not on curve");return{x:K,y:R}}else throw new Error(`bad point: got length ${g}, expected compressed=${w} or uncompressed=${b}`)}let P=t.toBytes||l,h=t.fromBytes||y;function I(O){let w=n.sqr(O),b=n.mul(w,O);return n.add(n.add(b,n.mul(O,s.a)),s.b)}function S(O,w){let b=n.sqr(w),g=I(O);return n.eql(b,g)}if(!S(s.Gx,s.Gy))throw new Error("bad curve params: generator point");let m=n.mul(n.pow(s.a,os),Ab),B=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(m,B)))throw new Error("bad curve params: a or b");function x(O,w,b=!1){if(!n.isValid(w)||b&&n.is0(w))throw new Error(`bad point coordinate ${O}`);return w}function T(O){if(!(O instanceof C))throw new Error("Weierstrass Point expected")}function k(O){if(!c||!c.basises)throw new Error("no endo");return Sb(O,c.basises,o.ORDER)}let $=Mr((O,w)=>{let{X:b,Y:g,Z:D}=O;if(n.eql(D,n.ONE))return{x:b,y:g};let N=O.is0();w==null&&(w=N?n.ONE:n.inv(D));let L=n.mul(b,w),K=n.mul(g,w),R=n.mul(D,w);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:L,y:K}}),M=Mr(O=>{if(O.is0()){if(t.allowInfinityPoint&&!n.is0(O.Y))return;throw new Error("bad point: ZERO")}let{x:w,y:b}=O.toAffine();if(!n.isValid(w)||!n.isValid(b))throw new Error("bad point: x or y not field elements");if(!S(w,b))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function v(O,w,b,g,D){return b=new C(n.mul(b.X,O),b.Y,b.Z),w=$n(g,w),b=$n(D,b),w.add(b)}class C{static BASE=new C(s.Gx,s.Gy,n.ONE);static ZERO=new C(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=o;X;Y;Z;constructor(w,b,g){this.X=x("x",w),this.Y=x("y",b,!0),this.Z=x("z",g),Object.freeze(this)}static CURVE(){return s}static fromAffine(w){let{x:b,y:g}=w||{};if(!w||!n.isValid(b)||!n.isValid(g))throw new Error("invalid affine point");if(w instanceof C)throw new Error("projective point not allowed");return n.is0(b)&&n.is0(g)?C.ZERO:new C(b,g,n.ONE)}static fromBytes(w){let b=C.fromAffine(h(q(w,void 0,"point")));return b.assertValidity(),b}static fromHex(w){return C.fromBytes(St(w))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,b=!0){return z.createCache(this,w),b||this.multiply(os),this}assertValidity(){M(this)}hasEvenY(){let{y:w}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(w)}equals(w){T(w);let{X:b,Y:g,Z:D}=this,{X:N,Y:L,Z:K}=w,R=n.eql(n.mul(b,K),n.mul(N,D)),F=n.eql(n.mul(g,K),n.mul(L,D));return R&&F}negate(){return new C(this.X,n.neg(this.Y),this.Z)}double(){let{a:w,b}=s,g=n.mul(b,os),{X:D,Y:N,Z:L}=this,K=n.ZERO,R=n.ZERO,F=n.ZERO,j=n.mul(D,D),ne=n.mul(N,N),ee=n.mul(L,L),Y=n.mul(D,N);return Y=n.add(Y,Y),F=n.mul(D,L),F=n.add(F,F),K=n.mul(w,F),R=n.mul(g,ee),R=n.add(K,R),K=n.sub(ne,R),R=n.add(ne,R),R=n.mul(K,R),K=n.mul(Y,K),F=n.mul(g,F),ee=n.mul(w,ee),Y=n.sub(j,ee),Y=n.mul(w,Y),Y=n.add(Y,F),F=n.add(j,j),j=n.add(F,j),j=n.add(j,ee),j=n.mul(j,Y),R=n.add(R,j),ee=n.mul(N,L),ee=n.add(ee,ee),j=n.mul(ee,Y),K=n.sub(K,j),F=n.mul(ee,ne),F=n.add(F,F),F=n.add(F,F),new C(K,R,F)}add(w){T(w);let{X:b,Y:g,Z:D}=this,{X:N,Y:L,Z:K}=w,R=n.ZERO,F=n.ZERO,j=n.ZERO,ne=s.a,ee=n.mul(s.b,os),Y=n.mul(b,N),oe=n.mul(g,L),ge=n.mul(D,K),rt=n.add(b,g),se=n.add(N,L);rt=n.mul(rt,se),se=n.add(Y,oe),rt=n.sub(rt,se),se=n.add(b,D);let Ee=n.add(N,K);return se=n.mul(se,Ee),Ee=n.add(Y,ge),se=n.sub(se,Ee),Ee=n.add(g,D),R=n.add(L,K),Ee=n.mul(Ee,R),R=n.add(oe,ge),Ee=n.sub(Ee,R),j=n.mul(ne,se),R=n.mul(ee,ge),j=n.add(R,j),R=n.sub(oe,j),j=n.add(oe,j),F=n.mul(R,j),oe=n.add(Y,Y),oe=n.add(oe,Y),ge=n.mul(ne,ge),se=n.mul(ee,se),oe=n.add(oe,ge),ge=n.sub(Y,ge),ge=n.mul(ne,ge),se=n.add(se,ge),Y=n.mul(oe,se),F=n.add(F,Y),Y=n.mul(Ee,se),R=n.mul(rt,R),R=n.sub(R,Y),Y=n.mul(rt,oe),j=n.mul(Ee,j),j=n.add(j,Y),new C(R,F,j)}subtract(w){return this.add(w.negate())}is0(){return this.equals(C.ZERO)}multiply(w){let{endo:b}=t;if(!o.isValidNot0(w))throw new Error("invalid scalar: out of range");let g,D,N=L=>z.cached(this,L,K=>rr(C,K));if(b){let{k1neg:L,k1:K,k2neg:R,k2:F}=k(w),{p:j,f:ne}=N(K),{p:ee,f:Y}=N(F);D=ne.add(Y),g=v(b.beta,j,ee,L,R)}else{let{p:L,f:K}=N(w);g=L,D=K}return rr(C,[g,D])[0]}multiplyUnsafe(w){let{endo:b}=t,g=this;if(!o.isValid(w))throw new Error("invalid scalar: out of range");if(w===It||g.is0())return C.ZERO;if(w===zr)return g;if(z.hasCache(this))return this.multiply(w);if(b){let{k1neg:D,k1:N,k2neg:L,k2:K}=k(w),{p1:R,p2:F}=vd(C,g,N,K);return v(b.beta,R,F,D,L)}else return z.unsafe(g,w)}toAffine(w){return $(this,w)}isTorsionFree(){let{isTorsionFree:w}=t;return i===zr?!0:w?w(C,this):z.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:w}=t;return i===zr?this:w?w(C,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(w=!0){return vt(w,"isCompressed"),this.assertValidity(),P(C,this,w)}toHex(w=!0){return Et(this.toBytes(w))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let V=o.BITS,z=new Hr(C,t.endo?Math.ceil(V/2):V);return C.BASE.precompute(8),C}function Jd(e){return Uint8Array.of(e?2:3)}function Qd(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function vb(e,t={}){let{Fn:r}=e,n=t.randomBytes||Or,o=Object.assign(Qd(e.Fp,r),{seed:Ia(r.ORDER)});function s(P){try{let h=r.fromBytes(P);return r.isValidNot0(h)}catch{return!1}}function i(P,h){let{publicKey:I,publicKeyUncompressed:S}=o;try{let m=P.length;return h===!0&&m!==I||h===!1&&m!==S?!1:!!e.fromBytes(P)}catch{return!1}}function a(P=n(o.seed)){return Ca(q(P,o.seed,"seed"),r.ORDER)}function c(P,h=!0){return e.BASE.multiply(r.fromBytes(P)).toBytes(h)}function u(P){let{secretKey:h,publicKey:I,publicKeyUncompressed:S}=o;if(!Yt(P)||"_lengths"in r&&r._lengths||h===I)return;let m=q(P,void 0,"key").length;return m===I||m===S}function f(P,h,I=!0){if(u(P)===!0)throw new Error("first arg must be private key");if(u(h)===!1)throw new Error("second arg must be public key");let S=r.fromBytes(P);return e.fromBytes(h).multiply(S).toBytes(I)}let l={isValidSecretKey:s,isValidPublicKey:i,randomSecretKey:a},y=zo(a,c);return Object.freeze({getPublicKey:c,getSharedSecret:f,keygen:y,Point:e,utils:l,lengths:o})}function ep(e,t,r={}){$o(t),Lt(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),r=Object.assign({},r);let n=r.randomBytes||Or,o=r.hmac||((b,g)=>oc(t,b,g)),{Fp:s,Fn:i}=e,{ORDER:a,BITS:c}=i,{keygen:u,getPublicKey:f,getSharedSecret:l,utils:y,lengths:P}=vb(e,r),h={prehash:!0,lowS:typeof r.lowS=="boolean"?r.lowS:!0,format:"compact",extraEntropy:!1},I=a*Yd<s.ORDER;function S(b){let g=a>>zr;return b>g}function m(b,g){if(!i.isValidNot0(g))throw new Error(`invalid signature ${b}: out of range 1..Point.Fn.ORDER`);return g}function B(){if(I)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function x(b,g){ic(g);let D=P.signature,N=g==="compact"?D:g==="recovered"?D+1:void 0;return q(b,N)}class T{r;s;recovery;constructor(g,D,N){if(this.r=m("r",g),this.s=m("s",D),N!=null){if(B(),![0,1,2,3].includes(N))throw new Error("invalid recovery id");this.recovery=N}Object.freeze(this)}static fromBytes(g,D=h.format){x(g,D);let N;if(D==="der"){let{r:F,s:j}=$t.toSig(q(g));return new T(F,j)}D==="recovered"&&(N=g[0],D="compact",g=g.subarray(1));let L=P.signature/2,K=g.subarray(0,L),R=g.subarray(L,L*2);return new T(i.fromBytes(K),i.fromBytes(R),N)}static fromHex(g,D){return this.fromBytes(St(g),D)}assertRecovery(){let{recovery:g}=this;if(g==null)throw new Error("invalid recovery id: must be present");return g}addRecoveryBit(g){return new T(this.r,this.s,g)}recoverPublicKey(g){let{r:D,s:N}=this,L=this.assertRecovery(),K=L===2||L===3?D+a:D;if(!s.isValid(K))throw new Error("invalid recovery id: sig.r+curve.n != R.x");let R=s.toBytes(K),F=e.fromBytes(_e(Jd((L&1)===0),R)),j=i.inv(K),ne=$(q(g,void 0,"msgHash")),ee=i.create(-ne*j),Y=i.create(N*j),oe=e.BASE.multiplyUnsafe(ee).add(F.multiplyUnsafe(Y));if(oe.is0())throw new Error("invalid recovery: point at infinify");return oe.assertValidity(),oe}hasHighS(){return S(this.s)}toBytes(g=h.format){if(ic(g),g==="der")return St($t.hexFromSig(this));let{r:D,s:N}=this,L=i.toBytes(D),K=i.toBytes(N);return g==="recovered"?(B(),_e(Uint8Array.of(this.assertRecovery()),L,K)):_e(L,K)}toHex(g){return Et(this.toBytes(g))}}let k=r.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");let D=$r(g),N=g.length*8-c;return N>0?D>>BigInt(N):D},$=r.bits2int_modN||function(g){return i.create(k(g))},M=On(c);function v(b){return Ln("num < 2^"+c,b,It,M),i.toBytes(b)}function C(b,g){return q(b,void 0,"message"),g?q(t(b),void 0,"prehashed message"):b}function V(b,g,D){let{lowS:N,prehash:L,extraEntropy:K}=sc(D,h);b=C(b,L);let R=$(b),F=i.fromBytes(g);if(!i.isValidNot0(F))throw new Error("invalid private key");let j=[v(F),v(R)];if(K!=null&&K!==!1){let oe=K===!0?n(P.secretKey):K;j.push(q(oe,void 0,"extraEntropy"))}let ne=_e(...j),ee=R;function Y(oe){let ge=k(oe);if(!i.isValidNot0(ge))return;let rt=i.inv(ge),se=e.BASE.multiply(ge).toAffine(),Ee=i.create(se.x);if(Ee===It)return;let Xn=i.create(rt*i.create(ee+Ee*F));if(Xn===It)return;let qc=(se.x===Ee?0:2)|Number(se.y&zr),zc=Xn;return N&&S(Xn)&&(zc=i.neg(Xn),qc^=1),new T(Ee,zc,I?void 0:qc)}return{seed:ne,k2sig:Y}}function z(b,g,D={}){let{seed:N,k2sig:L}=V(b,g,D);return ad(t.outputLen,i.BYTES,o)(N,L).toBytes(D.format)}function O(b,g,D,N={}){let{lowS:L,prehash:K,format:R}=sc(N,h);if(D=q(D,void 0,"publicKey"),g=C(g,K),!Yt(b)){let F=b instanceof T?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+F)}x(b,R);try{let F=T.fromBytes(b,R),j=e.fromBytes(D);if(L&&F.hasHighS())return!1;let{r:ne,s:ee}=F,Y=$(g),oe=i.inv(ee),ge=i.create(Y*oe),rt=i.create(ne*oe),se=e.BASE.multiplyUnsafe(ge).add(j.multiplyUnsafe(rt));return se.is0()?!1:i.create(se.x)===ne}catch{return!1}}function w(b,g,D={}){let{prehash:N}=sc(D,h);return g=C(g,N),T.fromBytes(b,"recovered").recoverPublicKey(g).toBytes()}return Object.freeze({keygen:u,getPublicKey:f,getSharedSecret:l,utils:y,lengths:P,Point:e,sign:z,verify:O,recoverPublicKey:w,Signature:T,hash:t})}var fc={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Ib={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]};var tp=BigInt(2);function Cb(e){let t=fc.p,r=BigInt(3),n=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,l=te(f,r,t)*f%t,y=te(l,r,t)*f%t,P=te(y,tp,t)*u%t,h=te(P,o,t)*P%t,I=te(h,s,t)*h%t,S=te(I,a,t)*I%t,m=te(S,c,t)*S%t,B=te(m,a,t)*I%t,x=te(B,r,t)*f%t,T=te(x,i,t)*h%t,k=te(T,n,t)*u%t,$=te(k,tp,t);if(!cc.eql(cc.sqr($),e))throw new Error("Cannot find square root");return $}var cc=Fr(fc.p,{sqrt:Cb}),Pb=Xd(fc,{Fp:cc,endo:Ib}),Gr=ep(Pb,Kr);function rp(e,t,r,n){let o=sn.digest(r instanceof Uint8Array?r:r.subarray());if(Zo(o))return o.then(({digest:s})=>(n?.signal?.throwIfAborted(),Gr.verify(t,s,e,{prehash:!1,format:"der"}))).catch(s=>{throw s.name==="AbortError"?s:new Mn(String(s))});try{return n?.signal?.throwIfAborted(),Gr.verify(t,o.digest,e,{prehash:!1,format:"der"})}catch(s){throw new Mn(String(s))}}var ss=class{type="secp256k1";raw;_key;constructor(t){this._key=op(t),this.raw=np(this._key)}toMultihash(){return Be.digest(Rr(this))}toCID(){return A.createV1(114,this.toMultihash())}toString(){return Q.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}verify(t,r,n){return rp(this._key,r,t,n)}};function uc(e){return new ss(e)}function np(e){return Gr.Point.fromBytes(e).toBytes()}function op(e){try{return Gr.Point.fromBytes(e),e}catch(t){throw new Nr(String(t))}}function sp(e,t){let{Type:r,Data:n}=ft.decode(e),o=n??new Uint8Array;switch(r){case ce.RSA:return tc(o,t);case ce.Ed25519:return ka(o);case ce.secp256k1:return uc(o);case ce.ECDSA:return fa(o);default:throw new Tn}}function ip(e){let{Type:t,Data:r}=ft.decode(e.digest),n=r??new Uint8Array;switch(t){case ce.Ed25519:return ka(n);case ce.secp256k1:return uc(n);case ce.ECDSA:return fa(n);default:throw new Tn}}function Rr(e){return ft.encode({Type:ce[e.type],Data:e.raw})}var ap=Symbol.for("nodejs.util.inspect.custom"),Bb=114,qn=class{type;multihash;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[na]=!0;toString(){return this.string==null&&(this.string=Q.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return A.createV1(Bb,this.multihash)}toJSON(){return this.toString()}equals(t){if(t==null)return!1;if(t instanceof Uint8Array)return Se(this.multihash.bytes,t);if(typeof t=="string")return this.toString()===t;if(t?.toMultihash()?.bytes!=null)return Se(this.multihash.bytes,t.toMultihash().bytes);throw new Error("not valid Id")}[ap](){return`PeerId(${this.toString()})`}},is=class extends qn{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}},as=class extends qn{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.publicKey}},cs=class extends qn{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.publicKey}},Tb=2336,zn=class{type="url";multihash;publicKey;url;constructor(t){this.url=t.toString(),this.multihash=Be.digest(G(this.url))}[ap](){return`PeerId(${this.url})`}[na]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return A.createV1(Tb,this.toMultihash())}toJSON(){return this.toString()}equals(t){return t==null?!1:(t instanceof Uint8Array&&(t=H(t)),t.toString()===this.toString())}};var _b=114,cp=2336;function ue(e,t){let r;if(e.charAt(0)==="1"||e.charAt(0)==="Q")r=on(Q.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return Db(A.parse(e));if(t==null)throw new Xe('Please pass a multibase decoder for strings that do not start with "1" or "Q"');r=on(t.decode(e))}return fp(r)}function fp(e){if(Nb(e))return new is({multihash:e});if(Ub(e))try{let t=ip(e);if(t.type==="Ed25519")return new as({multihash:e,publicKey:t});if(t.type==="secp256k1")return new cs({multihash:e,publicKey:t})}catch{let r=H(e.digest);return new zn(new URL(r))}throw new _o("Supplied PeerID Multihash is invalid")}function Db(e){if(e?.multihash==null||e.version==null||e.version===1&&e.code!==_b&&e.code!==cp)throw new To("Supplied PeerID CID is invalid");if(e.code===cp){let t=H(e.multihash.digest);return new zn(new URL(t))}return fp(e.multihash)}function Ub(e){return e.code===Be.code}function Nb(e){return e.code===sn.code}function fs(e){return async function(r={}){let n=await e.post("bitswap/stat",{searchParams:p(r),signal:r.signal,headers:r.headers});return kb(await n.json())}}function kb(e){return{provideBufLen:e.ProvideBufLen??0,wantlist:(e.Wantlist??[]).map(t=>A.parse(t["/"])),peers:(e.Peers??[]).map(t=>ue(t)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function up(e){return async function(r,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:p({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(s=>A.parse(s["/"]))}}function lp(e){return async function(r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()).Keys??[]).map(o=>A.parse(o["/"]))}}function lc(e){return{wantlist:lp(e),wantlistForPeer:up(e),stat:fs(e)}}function us(e){return async function(r,n={}){let o=await e.post("block/get",{signal:n.signal,searchParams:p({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function dp(e){return async function t(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]),i;try{i=await(await e.post("block/put",{signal:s,searchParams:p(n),...await ve([r],o,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return await t(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await t(r,{...n,format:"cbor"});throw a}finally{s.clear()}return A.parse(i.Key)}}function pp(e){return async function*(r,n={}){Array.isArray(r)||(r=[r]);let o=await e.post("block/rm",{signal:n.signal,searchParams:p({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield Rb(s)}}function Rb(e){let t={cid:A.parse(e.Hash)};return e.Error!=null&&(t.error=new Error(e.Error)),t}function hp(e){return async function(r,n={}){let s=await(await e.post("block/stat",{signal:n.signal,searchParams:p({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:A.parse(s.Key),size:s.Size}}}function dc(e){return{get:us(e),put:dp(e),rm:pp(e),stat:hp(e)}}function mp(e){return async function(r,n={}){let o=await e.post("bootstrap/add",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>J(i))}}}function yp(e){return async function(r={}){let n=await e.post("bootstrap/list",{signal:r.signal,searchParams:p(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>J(s))}}}function gp(e){return async function(r,n={}){let o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>J(i))}}}function pc(e){return{add:mp(e),list:yp(e),rm:gp(e)}}function wp(e){return async function*(r,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:p({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function xp(e){return async function(r={}){return(await e.post("commands",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()}}function bp(e){return async function(r={}){return await(await e.post("config/show",{signal:r.signal,searchParams:p({...r}),headers:r.headers})).json()}}function Ep(e){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers})).json()).Value}}function Sp(e){return async function(r,n={}){let s=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}}function Ap(e){return{apply:Sp(e)}}function vp(e){return async function(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:s,searchParams:p(n),...await ve([G(JSON.stringify(r))],o,n.headers)})).text()}finally{s.clear()}}}function Ip(e){return async function(r,n,o={}){if(typeof r!="string")throw new Error("Invalid key type");let s={...o,...Lb(r,n)};await(await e.post("config",{signal:o.signal,searchParams:p(s),headers:o.headers})).text()}}function Lb(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}}function hc(e){return{getAll:bp(e),get:Ep(e),set:Ip(e),replace:vp(e),profiles:Ap(e)}}function Cp(e){return async function*(r,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:p({arg:r.toString()}),headers:n.headers})).iterator()}}var Bp=Ft(Cn(),1);function Ob(e){return e[Symbol.asyncIterator]!=null}function Kb(e){if(Ob(e))return(async()=>{for await(let t of e)return t})();for(let t of e)return t}var Pp=Kb;var mc=Ft(Cn(),1);async function*yc(e,t,r,n,o){let s=async u=>{let f=await r.getCodec(u.code),l=await n(u,o);return f.decode(l)},i=t.split("/").filter(Boolean),a=await s(e),c=e;for(;i.length>0;){let u=i.shift();if(u==null)throw(0,mc.default)(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:i.join("/")};else throw(0,mc.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let f=A.asCID(a);f!=null&&(c=f,a=await s(a))}yield{value:a,remainderPath:""}}function Tp(e,t){let r=us(e);return async function(o,s={}){if(s.path!=null){let f=s.localResolve===!0?await Pp(yc(o,s.path,t,r,s)):await Dt(yc(o,s.path,t,r,s));if(f==null)throw(0,Bp.default)(new Error("Not found"),"ERR_NOT_FOUND");return f}let i=await t.getCodec(o.code),a=await r(o,s);return{value:i.decode(a),remainderPath:""}}}function _p(e){return async function*(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]);try{let{headers:i,body:a}=await ve(r,o,n.headers),c=await e.post("dag/import",{signal:s,headers:i,body:a,searchParams:p({"pin-roots":n.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":f},PinErrorMsg:l}=u;yield{root:{cid:A.parse(f),pinErrorMsg:l}}}}finally{s.clear()}}}function Dp(e,t){return async function(n,o={}){let s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o},i;if(s.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");i=n}else i=(await t.getCodec(s.storeCodec??"dag-cbor")).encode(n),s.inputCodec=s.storeCodec;let a=new AbortController,c=pe([a.signal,s.signal]);try{let f=await(await e.post("dag/put",{timeout:s.timeout,signal:c,searchParams:p(s),...await ve([i],a,s.headers)})).json();return A.parse(f.Cid["/"])}finally{c.clear()}}}function Up(e){return async function(r,n={}){let s=await(await e.post("dag/resolve",{signal:n.signal,searchParams:p({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:A.parse(s.Cid["/"]),remainderPath:s.RemPath}}}function gc(e,t){return{export:Cp(e),get:Tp(e,t),import:_p(e),put:Dp(e,t),resolve:Up(e)}}function je(e){if(e.Type===0)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===1)return{from:ue(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:ue(t),multiaddrs:r.map(n=>J(n)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:ue(t),multiaddrs:r.map(n=>J(n)),protocols:[]}))};if(e.Type===2){let t={id:e.ID??ue(e.ID),multiaddrs:[],protocols:[]};return e.Responses?.length>0&&(t={id:ue(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(r=>J(r)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===3)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===4)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:r})=>({id:ue(t),multiaddrs:r.map(n=>J(n)),protocols:[]}))};if(e.Type===5)return{name:"VALUE",type:e.Type,value:G(e.Extra,"base64pad")};if(e.Type===6){let t=e.Responses.map(({ID:r})=>ue(r));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===7)return{name:"DIALING_PEER",type:e.Type,peer:ue(e.ID)};throw new Error("Unknown DHT event type")}function Np(e){return async function*(r,n={}){let o=await e.post("dht/query",{signal:n.signal,searchParams:p({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield je(s)}}var wc;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(wc||(wc={}));var xc;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(xc||(xc={}));function bc(e){return{query:Np(e)}}function kp(e){return async function(r={}){return(await e.post("diag/cmds",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()}}function Rp(e){return async function(r={}){return(await e.post("diag/net",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()}}function Lp(e){return async function(r={}){return(await e.post("diag/sys",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()}}function Ec(e){return{cmds:kp(e),net:Rp(e),sys:Lp(e)}}function Op(e){return async function(r,n,o={}){let s=Array.isArray(r)?r:[r];await(await e.post("files/cp",{signal:o.signal,searchParams:p({arg:s.concat(n).map(a=>A.asCID(a)!=null?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}}function Kp(e){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await e.post("files/flush",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers})).json();return A.parse(s.Cid)}}function Gn(e){let t=W(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs??0},delete t.mtimeNsecs),t}function Mp(e){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");let o=await e.post("files/ls",{signal:n.signal,searchParams:p({arg:A.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries??[])yield $p(Gn(i));else yield $p(Gn(s))}}function $p(e){return e.hash!=null&&(e.cid=A.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function Fp(e){return async function(r,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers})).text()}}function Vp(e){return async function(r,n,o={}){Array.isArray(r)||(r=[r]),await(await e.post("files/mv",{signal:o.signal,searchParams:p({arg:r.concat(n),...o}),headers:o.headers})).text()}}function Sc(e){if(Mb(e))return(async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}})();if($b(e))return e;throw new Error("unknown stream")}function $b(e){return e[Symbol.asyncIterator]!=null}function Mb(e){return typeof e?.getReader=="function"}function Hp(e){return async function*(r,n={}){let o=await e.post("files/read",{signal:n.signal,searchParams:p({arg:r,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*Sc(o.body)}}function jp(e){return async function(r,n={}){let o=await e.post("files/rm",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new Co(o);throw i.message=s,i}}}function ls(e){return async function(r,n={}){let s=await(await e.post("files/stat",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality??!1,Fb(Gn(s))}}function Fb(e){return e.cid=A.parse(e.hash),delete e.hash,e}function qp(e){return async function(r,n,o={}){let s=new AbortController,i=pe([s.signal,o.signal]);try{await(await e.post("files/write",{signal:i,searchParams:p({arg:r,streamChannels:!0,count:o.length,...o}),...await ve([{content:n,path:"arg",mode:Ur(o.mode),mtime:_t(o.mtime)}],s,o.headers)})).text()}finally{i.clear()}}}function Ac(e){return{cp:Op(e),flush:Kp(e),ls:Mp(e),mkdir:Fp(e),mv:Vp(e),read:Hp(e),rm:jp(e),stat:ls(e),write:qp(e)}}function zp(e){return function(){let r=new URL(e.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function Gp(e){return async function*(r,n={}){let o={arg:`${r instanceof Uint8Array?A.decode(r):r}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:p(o),headers:n.headers})).iterator()}}function ds(e){return async function(r={}){let o=await(await e.post("id",{signal:r.signal,searchParams:p({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...W(o)};return s.id=ue(s.id),s.addresses!=null&&(s.addresses=s.addresses.map(i=>J(i))),s}}function Wp(e){let t=ds(e);return async function(n={}){try{return!!(await t(n))?.addresses?.length}catch{return!1}}}var Vb={type:"ed25519"};function Zp(e){return async function(r,n=Vb){let s=await(await e.post("key/gen",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers})).json();return W(s)}}function Yp(e){return async function(r,n,o,s={}){let a=await(await e.post("key/import",{signal:s.signal,searchParams:p({arg:r,pem:n,password:o,...s}),headers:s.headers})).json();return W(a)}}function Xp(e){return async function(r={}){return((await(await e.post("key/list",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()).Keys??[]).map(s=>W(s))}}function Jp(e){return async function(r,n,o={}){let s=await e.post("key/rename",{signal:o.signal,searchParams:p({arg:[r,n],...o}),headers:o.headers});return W(await s.json())}}function Qp(e){return async function(r,n={}){let s=await(await e.post("key/rm",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers})).json();return W(s.Keys[0])}}function vc(e){return{gen:Zp(e),import:Yp(e),list:Xp(e),rename:Jp(e),rm:Qp(e)}}function Hb(e,t){if(typeof e=="string")return jb(e);if(typeof e=="number")return Gb(e,t);throw Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(e)}`)}var ps=Hb;function jb(e){if(typeof e!="string"||e.length===0||e.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(e)}`);let t=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(e);if(!t?.groups)return NaN;let{value:r,unit:n="ms"}=t.groups,o=parseFloat(r),s=n.toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return o*315576e5;case"months":case"month":case"mo":return o*26298e5;case"weeks":case"week":case"w":return o*6048e5;case"days":case"day":case"d":return o*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return o*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return o*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return o*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:throw Error(`Unknown unit "${s}" provided to ms.parse(). value=${JSON.stringify(e)}`)}}function qb(e){let t=Math.abs(e);return t>=315576e5?`${Math.round(e/315576e5)}y`:t>=26298e5?`${Math.round(e/26298e5)}mo`:t>=6048e5?`${Math.round(e/6048e5)}w`:t>=864e5?`${Math.round(e/864e5)}d`:t>=36e5?`${Math.round(e/36e5)}h`:t>=6e4?`${Math.round(e/6e4)}m`:t>=1e3?`${Math.round(e/1e3)}s`:`${e}ms`}function zb(e){let t=Math.abs(e);return t>=315576e5?sr(e,t,315576e5,"year"):t>=26298e5?sr(e,t,26298e5,"month"):t>=6048e5?sr(e,t,6048e5,"week"):t>=864e5?sr(e,t,864e5,"day"):t>=36e5?sr(e,t,36e5,"hour"):t>=6e4?sr(e,t,6e4,"minute"):t>=1e3?sr(e,t,1e3,"second"):`${e} ms`}function Gb(e,t){if(typeof e!="number"||!Number.isFinite(e))throw Error("Value provided to ms.format() must be of type number.");return t?.long?zb(e):qb(e)}function sr(e,t,r,n){let o=t>=r*1.5;return`${Math.round(e/r)} ${n}${o?"s":""}`}function Ic(e){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=o,r.enabled=i,r.humanize=ps,r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let l=0;for(let y=0;y<f.length;y++)l=(l<<5)-l+f.charCodeAt(y),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(f){let l,y=null,P,h;function I(...S){if(!I.enabled)return;let m=I,B=Number(new Date),x=B-(l||B);m.diff=x,m.prev=l,m.curr=B,l=B,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let T=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,($,M)=>{if($==="%%")return"%";T++;let v=r.formatters[M];if(typeof v=="function"){let C=S[T];$=v.call(m,C),S.splice(T,1),T--}return $}),r.formatArgs.call(m,S),(m.log||r.log).apply(m,S)}return I.namespace=f,I.useColors=r.useColors(),I.color=r.selectColor(f),I.extend=n,I.destroy=r.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(P!==r.namespaces&&(P=r.namespaces,h=r.enabled(f)),h),set:S=>{y=S}}),typeof r.init=="function"&&r.init(I),I}function n(f,l){let y=r(this.namespace+(typeof l>"u"?":":l)+f);return y.log=this.log,y}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,y=(typeof f=="string"?f:"").split(/[\s,]+/),P=y.length;for(l=0;l<P;l++)y[l]&&(f=y[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function i(f){if(f[f.length-1]==="*")return!0;let l,y;for(l=0,y=r.skips.length;l<y;l++)if(r.skips[l].test(f))return!1;for(l=0,y=r.names.length;l<y;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack??f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var hs=e1(),Wb=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Zb(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function Yb(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ps(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}var Xb=console.debug??console.log??(()=>{});function Jb(e){try{e?hs?.setItem("debug",e):hs?.removeItem("debug")}catch{}}function Qb(){let e;try{e=hs?.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=globalThis.process.env.DEBUG),e}function e1(){try{return localStorage}catch{}}function t1(e){e.j=function(t){try{return JSON.stringify(t)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}var eh=Ic({formatArgs:Yb,save:Jb,load:Qb,useColors:Zb,setupFormatters:t1,colors:Wb,storage:hs,log:Xb});var De=eh;De.formatters.b=e=>e==null?"undefined":Q.baseEncode(e);De.formatters.t=e=>e==null?"undefined":nt.baseEncode(e);De.formatters.m=e=>e==null?"undefined":fr.baseEncode(e);De.formatters.p=e=>e==null?"undefined":e.toString();De.formatters.c=e=>e==null?"undefined":e.toString();De.formatters.k=e=>e==null?"undefined":e.toString();De.formatters.a=e=>e==null?"undefined":e.toString();De.formatters.e=e=>e==null?"undefined":th(e.stack)??th(e.message)??e.toString();function r1(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function ir(e){let t=r1(`${e}:trace`);return De.enabled(`${e}:trace`)&&De.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=De(`${e}:trace`)),Object.assign(De(e),{error:De(`${e}:error`),trace:t,newScope:r=>ir(`${e}:${r}`)})}function th(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var uh=Ft(fh(),1),gs=uh.default;var Z=Object.create(null),lh=6e4,dh=lh*60,Pc=dh*24,ph=Pc*365.25;Z.year=Z.yr=Z.y=ph;Z.month=Z.mo=Z.mth=ph/12;Z.week=Z.wk=Z.w=Pc*7;Z.day=Z.d=Pc;Z.hour=Z.hr=Z.h=dh;Z.minute=Z.min=Z.m=lh;Z.second=Z.sec=Z.s=1e3;Z.millisecond=Z.millisec=Z.ms=1;Z.microsecond=Z.microsec=Z.us=Z.\u00B5s=.001;Z.nanosecond=Z.nanosec=Z.ns=1e-6;Z.group=",";Z.decimal=".";Z.placeholder=" _";var hh=Z;var c1=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;qe.unit=hh;function qe(e="",t="ms"){let r=null,n;return String(e).replace(new RegExp(`(\\d)[${qe.unit.placeholder}${qe.unit.group}](\\d)`,"g"),"$1$2").replace(qe.unit.decimal,".").replace(c1,(o,s,i)=>{if(i)i=i.toLowerCase();else if(n){for(let a in qe.unit)if(qe.unit[a]<n){i=a;break}}else i=t;n=i=qe.unit[i]||qe.unit[i.replace(/s$/,"")],i&&(r=(r||0)+s*i)}),r&&r/(qe.unit[t]||1)*(e[0]==="-"?-1:1)}var mh=()=>{};var Xr=Ft(Sh(),1);var Yr=class extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}},ws=class extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}},Zn=class extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}};var Ah=globalThis.fetch,Yn=globalThis.Headers,_c=globalThis.Request,Dc=globalThis.Response;var w1=async(e,t={})=>{let r=new XMLHttpRequest;r.open(t.method??"GET",e.toString(),!0);let{timeout:n,headers:o}=t,s=Number(n);if(!isNaN(s)&&s>0&&s<1/0&&(r.timeout=s),t.overrideMimeType!=null&&r.overrideMimeType(t.overrideMimeType),o!=null)for(let[i,a]of new Yn(o))r.setRequestHeader(i,a);return t.signal!=null&&(t.signal.onabort=()=>{r.abort()}),t.onUploadProgress!=null&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((i,a)=>{let c=u=>{switch(u.type){case"error":{i(Dc.error());break}case"load":{i(new Uc(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:b1(r.getAllResponseHeaders())}));break}case"timeout":{a(new Yr);break}case"abort":{a(new ws);break}default:break}};r.onerror=c,r.onload=c,r.ontimeout=c,r.onabort=c,r.send(t.body)})},x1=Ah,vh=(e,t={})=>t.onUploadProgress!=null?w1(e,t):x1(e,t),b1=e=>{let t=new Yn;for(let r of e.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&t.set(r.slice(0,n),r.slice(n+1))}return t},Uc=class extends Dc{constructor(t,r,n){super(r,n),Object.defineProperty(this,"url",{value:t})}};var Ih=gs.bind({ignoreUndefined:!0}),xs=ir("kubo-rpc-client:fetch"),E1={throwHttpErrors:!0,credentials:"same-origin"},et=class e{static HTTPError=Zn;static TimeoutError=Yr;static post=async(t,r)=>new e(r).post(t,r);static get=async(t,r)=>new e(r).get(t,r);static put=async(t,r)=>new e(r).put(t,r);static delete=async(t,r)=>new e(r).delete(t,r);static options=async(t,r)=>new e(r).options(t,r);opts;constructor(t={}){this.opts=Ih({},E1,t)}async fetch(t,r={}){let n=Ih({},this.opts,r),o=new Yn(n.headers);if(typeof t!="string"&&!(t instanceof Xr.URL||t instanceof _c))throw new TypeError("`resource` must be a string, URL, or Request");let s=new Xr.URL(t.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i!=null&&(typeof a=="function"?s.search=a(new Xr.URLSearchParams(n.searchParams)):s.search=new Xr.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));let f=pe(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(_r||Dr)&&(n.body=new Blob(await Do(yt(n.body)))),xs.trace("outgoing headers",n.headers),xs.trace("%s %s",n.method,s);let l=await vh(s.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(xs("%s %s %d",n.method,s,l.status),xs.trace("incoming headers",l.headers),!l.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(l),new Zn(l);return l.iterator=async function*(){yield*A1(l.body)},l.ndjson=async function*(){for await(let y of S1(l.iterator()))r.transform!=null?yield r.transform(y):yield y},l}finally{f.clear()}}async post(t,r={}){return this.fetch(t,{...r,method:"POST"})}async get(t,r={}){return this.fetch(t,{...r,method:"GET"})}async put(t,r={}){return this.fetch(t,{...r,method:"PUT"})}async delete(t,r={}){return this.fetch(t,{...r,method:"DELETE"})}async options(t,r={}){return this.fetch(t,{...r,method:"OPTIONS"})}},S1=async function*(e){let t=new TextDecoder,r="";for await(let n of e){r+=t.decode(n,{stream:!0});let o=r.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=t.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},A1=e=>{if(v1(e))return e;if(C1(e)){let t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(r){return e.destroy(),typeof t.return=="function"?t.return():Promise.resolve({done:!0,value:r})}}}}}if(I1(e)){let t=e.getReader();return(async function*(){try{for(;;){let{done:r,value:n}=await t.read();if(r)return;n!=null&&(yield n)}}finally{t.releaseLock()}})()}throw new TypeError("Body can't be converted to AsyncIterable")},v1=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",I1=e=>e!=null&&typeof e.getReader=="function",C1=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");var P1=[6,53,56,54,55];function Ch(e){return Th("sni",e)?.value}function Ph(e){let t=Th("tcp",e)?.value;return t==null?"":`:${t}`}function Th(e,t){return t.find(r=>r.name===e)}function Bh(e){return e.some(({code:t})=>t===448)}function tt(e,t){let r=_h[e.name];if(r==null)throw new Error(`Can't interpret protocol ${e.name}`);let n=r(e,t);return e.code===41?`[${n}]`:n}var _h={ip4:(e,t)=>e.value,ip6:(e,t)=>t.length===0?e.value:`[${e.value}]`,tcp:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${tt(r,t)}:${e.value}`},udp:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${tt(r,t)}:${e.value}`},dnsaddr:(e,t)=>e.value,dns4:(e,t)=>e.value,dns6:(e,t)=>e.value,dns:(e,t)=>e.value,ipfs:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${tt(r,t)}`},p2p:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${tt(r,t)}`},http:(e,t)=>{let r=Bh(t),n=Ch(t),o=Ph(t);if(r&&n!=null)return`https://${n}${o}`;let s=r?"https://":"http://",i=t.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=tt(i,t);return a=a?.replace("tcp://",""),`${s}${a}`},"http-path":(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=tt(r,t),o=decodeURIComponent(e.value??"");return`${n}${o}`},tls:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return tt(r,t)},sni:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return tt(r,t)},https:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=tt(r,t);return n=n?.replace("tcp://",""),`https://${n}`},ws:(e,t)=>{let r=Bh(t),n=Ch(t),o=Ph(t);if(r&&n!=null)return`wss://${n}${o}`;let s=r?"wss://":"ws://",i=t.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=tt(i,t);return a=a?.replace("tcp://",""),`${s}${a}`},wss:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=tt(r,t);return n=n?.replace("tcp://",""),`wss://${n}`}};function Dh(e,t){let n=J(e).getComponents(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let s=_h[o.name];if(s==null)throw new Error(`No interpreter found for ${o.name}`);let i=s(o,n)??"";return t?.assumeHttp!==!1&&P1.includes(o.code)&&(i=i.replace(/^.*:\/\//,""),o.value==="443"?i=`https://${i}`:i=`http://${i}`),(i.startsWith("http://")||i.startsWith("https://")||i.startsWith("ws://")||i.startsWith("wss://"))&&(i=new URL(i).toString(),i.endsWith("/")&&(i=i.substring(0,i.length-1))),i}function Nc(e){try{e=Dh(J(e))}catch{}return e=e.toString(),e}var Uh=ir("js-kubo-rpc-client:lib:error-handler"),B1=gs.bind({ignoreUndefined:!0}),T1=_r||Dr?location.protocol:"http",_1=_r||Dr?location.hostname:"localhost",D1=_r||Dr?location.port:"5001",U1=(e={})=>{let t,r={},n;if(typeof e=="string"||zt(e))t=new URL(Nc(e));else if(e instanceof URL)t=e;else if(typeof e.url=="string"||zt(e.url))t=new URL(Nc(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e??{};let o=(r.protocol??T1).replace(":",""),s=(r.host??_1).split(":")[0],i=r.port??D1;t=new URL(`${o}://${s}:${i}`)}if(r.apiPath!=null?t.pathname=r.apiPath:(t.pathname==="/"||t.pathname===void 0)&&(t.pathname="api/v0"),Tl){let o=mh(t);n=r.agent??new o({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}},N1=async e=>{let t;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){let n=await e.json();Uh(n),t=n.Message??n.message}else t=await e.text()}catch(n){Uh("Failed to parse error response",n),t=n.message}let r=new et.HTTPError(e);throw t!=null&&(t.includes("deadline has elapsed")&&(r=new et.TimeoutError),t.includes("context deadline exceeded")&&(r=new et.TimeoutError),t.includes("request timed out")&&(r=new et.TimeoutError),r.message=t),r},k1=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Nh=e=>e.replace(k1,function(t){return"-"+t.toLowerCase()}),R1=e=>typeof e=="string"?qe(e)??0:e,bs=class extends et{constructor(t={}){let r=U1(t);super({timeout:r.timeout!=null?R1(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:N1,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&i!=="timeout"&&s.append(Nh(i),a),i==="timeout"&&!isNaN(parseInt(a))&&s.append(Nh(i),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=async(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,B1(s,{method:"POST"})))}},aT=et.HTTPError;var L1=async e=>Promise.reject(new Error(`No base found for "${e}"`)),Es=class{_basesByName;_basesByPrefix;_loadBase;constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase??L1;for(let r of t.bases)this.addBase(r)}addBase(t){if(this._basesByName[t.name]!=null&&this._basesByPrefix[t.prefix]!=null)throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t]!=null)return this._basesByName[t];if(this._basesByPrefix[t]!=null)return this._basesByPrefix[t];let r=await this._loadBase(t);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};var O1=async e=>Promise.reject(new Error(`No codec found for "${e}"`)),Ss=class{_codecsByName;_codecsByCode;_loadCodec;constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec??O1;for(let r of t.codecs)this.addCodec(r)}addCodec(t){if(this._codecsByName[t.name]!=null||this._codecsByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){let r=typeof t=="string"?this._codecsByName:this._codecsByCode;if(r[t]!=null)return r[t];let n=await this._loadCodec(t);return r[t]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var K1=async e=>Promise.reject(new Error(`No hasher found for "${e}"`)),As=class{_hashersByName;_hashersByCode;_loadHasher;constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher??K1;for(let r of t.hashers)this.addHasher(r)}addHasher(t){if(this._hashersByName[t.name]!=null||this._hashersByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){let r=typeof t=="string"?this._hashersByName:this._hashersByCode;if(r[t]!=null)return r[t];let n=await this._loadHasher(t);return r[t]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};function kh(e){return async function(t,r,n={}){let o=await e.post("log/level",{signal:n.signal,searchParams:p({arg:[t,r],...n}),headers:n.headers});return W(await o.json())}}function Rh(e){return async function(r={}){return(await(await e.post("log/ls",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()).Strings}}function Lh(e){return async function*(r={}){yield*(await e.post("log/tail",{signal:r.signal,searchParams:p(r),headers:r.headers})).ndjson()}}function kc(e){return{level:kh(e),ls:Rh(e),tail:Lh(e)}}function Oh(e){return async function*(r,n={}){let o=`${r instanceof Uint8Array?A.decode(r):r}`;async function s(a){let c=a.Hash;if(c.includes("/")===!0){let f=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await ls(e)(f)).cid}else c=A.parse(c);return{name:a.Name,path:o+(a.Name!=null?`/${a.Name}`:""),size:a.Size,cid:c,type:$1(a)}}let i=await e.post("ls",{signal:n.signal,searchParams:p({arg:o,...n}),headers:n.headers});for await(let a of i.ndjson()){if(a=a.Objects,a==null)throw new Error("expected .Objects in results");if(a=a[0],a==null)throw new Error("expected one array in results.Objects");let c=a.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield s(a);return}yield*c.map(s)}}}function $1(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function Kh(e){return async function(r={}){let n=await e.post("dns",{signal:r.signal,searchParams:p(r),headers:r.headers});return W(await n.json())}}function $h(e){return async function(r,n={}){let o=await e.post("name/publish",{signal:n.signal,searchParams:p({arg:`${r}`,...n}),headers:n.headers});return W(await o.json())}}function Mh(e){return async function(r,n={}){let o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers});return W(await o.json())}}function Fh(e){return async function(r={}){let n=await e.post("name/pubsub/state",{signal:r.signal,searchParams:p(r),headers:r.headers});return W(await n.json())}}function Vh(e){return async function(r={}){return(await(await e.post("name/pubsub/subs",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()).Strings??[]}}function Hh(e){return{cancel:Mh(e),state:Fh(e),subs:Vh(e)}}function jh(e){return async function*(r,n={}){let o=await e.post("name/resolve",{signal:n.signal,searchParams:p({arg:r,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}}function Rc(e){return{publish:$h(e),resolve:jh(e),pubsub:Hh(e)}}function qh(e){return async function(r,n,o={}){let s=await e.post("object/patch/add-link",{signal:o.signal,searchParams:p({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:i}=await s.json();return A.parse(i)}}function zh(e){return async function(r,n,o={}){let s=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:p({arg:[`${r}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:i}=await s.json();return A.parse(i)}}function Gh(e){return{addLink:qh(e),rmLink:zh(e)}}function Lc(e,t){return{patch:Gh(e)}}function M1(e){return Symbol.iterator in e}function F1(e){return Symbol.asyncIterator in e}function V1(e){return A.asCID(e)!=null}async function*Is(e){if(e==null)throw new Xe(`Unexpected input: ${e}`);let t=A.asCID(e);if(t!=null){yield ar({cid:t});return}if(typeof e=="string"){yield ar({path:e});return}if(e.cid!=null||e.path!=null)return yield ar(e);if(M1(e)){let r=e[Symbol.iterator](),n=r.next();if(n.done===!0)return r;yield ar(vs(n.value));for(let o of r)yield ar(vs(o));return}if(F1(e)){let r=e[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;yield ar(vs(n.value));for await(let o of r)yield ar(vs(o));return}throw new Xe(`Unexpected input: ${typeof e}`)}function vs(e){if(V1(e))return{cid:e};if(typeof e=="string")return{path:e};if(typeof e=="object"&&(e.cid!=null||e.path!=null))return e;throw new Xe(`Unexpected input: ${typeof e}`)}function ar(e){let t=e.cid??(e.path!=null?`${e.path}`:void 0);if(t==null)throw new Xe("Unexpected input: Please pass either a CID or an IPFS path");let r={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(r.metadata=e.metadata),e.name!=null&&(r.name=e.name),r}function Cs(e){return async function*(r,n={}){for await(let{path:o,recursive:s,metadata:i,name:a}of Is(r)){let c=await e.post("pin/add",{signal:n.signal,searchParams:p({...n,arg:o.toString(),recursive:s,metadata:i!=null?JSON.stringify(i):void 0,name:a??n.name,stream:!0}),headers:n.headers});for await(let u of c.ndjson()){if(u.Pins!=null){for(let f of u.Pins)yield A.parse(f);continue}yield A.parse(u)}}}}function Wh(e){let t=Cs(e);return async function(n,o={}){let s=await Dt(t([{path:n.toString(),...o}],o));if(s==null)throw new Error("No response received");return s}}function Zh(e,t,r,n){let o={type:e,cid:A.parse(t)};return r!=null&&(o.metadata=r),n!=null&&(o.name=n),o}function Yh(e){return async function*(r={}){let n=[];if(r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]),r.name!=null&&r.names===!1)throw new Error("Cannot use name filter when names is explicitly set to false");if(r.name==="")throw new Error("Name filter cannot be empty string");let o=r.names??r.name!=null,s=await e.post("pin/ls",{signal:r.signal,searchParams:p({...r,arg:n.map(i=>`${i}`),names:o,stream:!0}),headers:r.headers});for await(let i of s.ndjson()){if(i.Keys!=null){for(let a of Object.keys(i.Keys))yield Zh(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield Zh(i.Type,i.Cid,i.Metadata,i.Name)}}}var Ps=({Name:e,Status:t,Cid:r})=>({cid:A.parse(r),name:e,status:t}),Xh=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},Jh=e=>{if(A.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Jr=({service:e,cid:t,name:r,status:n,all:o})=>{let s=p({service:Xh(e),name:r,force:o===!0?!0:void 0});if(t!=null)for(let i of t)s.append("cid",Jh(i));if(n!=null)for(let i of n)s.append("status",i);return s},Qh=(e,{service:t,background:r,name:n,origins:o})=>{let s=p({arg:Jh(e),service:Xh(t),name:n,background:r===!0?!0:void 0});if(o!=null)for(let i of o)s.append("origin",i.toString());return s};function em(e){return async function(r,{timeout:n,signal:o,headers:s,...i}){let a=await e.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:Qh(r,i)});return Ps(await a.json())}}function tm(e){return async function*({timeout:r,signal:n,headers:o,...s}){let i=await e.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:Jr(s)});for await(let a of i.ndjson())yield Ps(a)}}function rm(e){return async function({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:Jr({...s,all:!0})})}}function nm(e){return async function({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:Jr({...s,all:!1})})}}function om(e){let t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function sm(e){let t={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(t.stat=H1(e.Stat)),t}function H1(e){switch(e.Status){case"valid":{let{Pinning:t,Pinned:r,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function im(e){return async function(r,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:c}=n;await e.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:p({arg:[r,om(o),s]}),headers:i})}}function am(e){return async function(r={}){let{stat:n,headers:o,timeout:s,signal:i}=r;return(await(await e.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?p({stat:n}):void 0})).json()).RemoteServices.map(sm)}}function cm(e){return async function(r,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:p({arg:r})})}}function fm(e){return{add:im(e),ls:am(e),rm:cm(e)}}function um(e){return{add:em(e),ls:tm(e),rm:nm(e),rmAll:rm(e),service:fm(e)}}function Bs(e){return async function*(r,n={}){for await(let{path:o,recursive:s}of Is(r)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:p({...n,arg:`${o}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>A.parse(u));continue}yield A.parse(c)}}}}function lm(e){let t=Bs(e);return async function(n,o={}){let s=await Dt(t([{path:n.toString(),...o}],o));if(s==null)throw new Error("No response received");return s}}function dm(e){return async function(r,n,o={}){let s=await e.post("pin/update",{signal:o.signal,searchParams:p({...o,arg:[r.toString(),n.toString()]}),headers:o.headers}),{Pins:i}=await s.json();return i.map(a=>A.parse(a))}}function Oc(e){return{addAll:Cs(e),add:Wh(e),ls:Yh(e),rmAll:Bs(e),rm:lm(e),update:dm(e),remote:um(e)}}function pm(e){return async function*(r,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:p({arg:`${r}`,...n}),headers:n.headers,transform:W})).ndjson()}}var hm=e=>Array.isArray(e)?e.map(Ts):e,Ts=e=>H(Qr(e)),Qr=e=>Vt.decode(e),mm=e=>BigInt(`0x${H(Vt.decode(e),"base16")}`),en=e=>Vt.encode(G(e));function ym(e){return async function(r={}){let{Strings:n}=await(await e.post("pubsub/ls",{signal:r.signal,searchParams:p(r),headers:r.headers})).json();return hm(n)??[]}}function gm(e){return async function(r,n={}){let o=await e.post("pubsub/peers",{signal:n.signal,searchParams:p({arg:en(r),...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function wm(e){return async function(r,n,o={}){let s=p({arg:en(r),...o}),i=new AbortController,a=pe([i.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:a,searchParams:s,...await ve([n],i,o.headers)})).text()}finally{a.clear()}}}var j1=ir("js-kubo-rpc-client:pubsub:subscribe");function xm(e,t){return async function(n,o,s={}){s.signal=t.subscribe(n,o,s.signal);let i,a,c=new Promise((f,l)=>{i=f,a=l}),u=setTimeout(()=>{i()},1e3);return e.post("pubsub/sub",{signal:s.signal,searchParams:p({arg:en(n),...s}),headers:s.headers}).catch(f=>{t.unsubscribe(n,o),a(f)}).then(f=>{clearTimeout(u),f!=null&&(q1(f,{onMessage:l=>{if(o!=null){if(typeof o=="function"){o(l);return}typeof o.handleEvent=="function"&&o.handleEvent(l)}},onEnd:()=>{t.unsubscribe(n,o)},onError:s.onError}),i())}),c}}async function q1(e,{onMessage:t,onEnd:r,onError:n}){n=n??j1;try{for await(let o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?t({type:"signed",from:ue(o.from),data:Qr(o.data),sequenceNumber:mm(o.seqno),topic:Ts(o.topicIDs[0]),key:o.key!=null?sp(Qr(o.key??"u")):void 0,signature:Qr(o.signature??"u")}):t({type:"unsigned",data:Qr(o.data),topic:Ts(o.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){z1(o)||n(o,!0)}finally{r()}}var z1=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};var _s=class{_subs;constructor(){this._subs=new Map}subscribe(t,r,n){let o=this._subs.get(t)??[];if(o.find(i=>i.handler===r)!=null)throw new Error(`Already subscribed to ${t} with this handler`);let s=new AbortController;return this._subs.set(t,[{handler:r,controller:s}].concat(o)),n?.addEventListener("abort",()=>{this.unsubscribe(t,r)}),s.signal}unsubscribe(t,r){let n=this._subs.get(t)??[],o;r!=null?(this._subs.set(t,n.filter(s=>s.handler!==r)),o=n.filter(s=>s.handler===r)):(this._subs.set(t,[]),o=n),(this._subs.get(t)??[]).length===0&&this._subs.delete(t),o.forEach(s=>{s.controller.abort()})}};function bm(e,t){return async function(n,o){t.unsubscribe(n,o)}}function Kc(e){let t=new _s;return{ls:ym(e),peers:gm(e),publish:wm(e),subscribe:xm(e,t),unsubscribe:bm(e,t)}}function Em(e){return async function*(r={}){yield*(await e.post("refs/local",{signal:r.signal,transform:W,searchParams:p(r),headers:r.headers})).ndjson()}}function $c(e){async function*t(r,n={}){let o=Array.isArray(r)?r:[r];yield*(await e.post("refs",{signal:n.signal,searchParams:p({arg:o.map(i=>`${i instanceof Uint8Array?A.decode(i):i}`),...n}),headers:n.headers,transform:W})).ndjson()}return Object.assign(t,{local:Em(e)})}function Sm(e){return async function*(r={}){yield*(await e.post("repo/gc",{signal:r.signal,searchParams:p(r),headers:r.headers,transform:o=>({err:o.Error!=null?new Error(o.Error):null,cid:o.Key?.["/"]!=null?A.parse(o.Key["/"]):null})})).ndjson()}}function Ds(e){return async function(r={}){let o=await(await e.post("repo/stat",{signal:r.signal,searchParams:p(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function Am(e){return async function(r={}){return(await(await e.post("repo/version",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()).Version}}function Mc(e){return{gc:Sm(e),stat:Ds(e),version:Am(e)}}function vm(e){return async function(r,n={}){let o=await e.post("resolve",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers}),{Path:s}=await o.json();return s}}function Im(e){return async function*(r,n={}){let o=await e.post("routing/findpeer",{signal:n.signal,searchParams:p({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield je(s)}}function Cm(e){return async function*(r,n={}){let o=await e.post("routing/findprovs",{signal:n.signal,searchParams:p({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield je(s)}}function Pm(e){return async function*(r,n={}){let o=await e.post("routing/get",{signal:n.signal,searchParams:p({arg:r instanceof Uint8Array?H(r):r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield je(s)}}function Bm(e){return async function*(r,n={recursive:!1}){let o=Array.isArray(r)?r:[r],s=await e.post("routing/provide",{signal:n.signal,searchParams:p({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield je(i)}}function Tm(e){return async function*(r,n,o={}){let s=new AbortController,i=pe([s.signal,o.signal]);try{let a=await e.post("routing/put",{signal:i,searchParams:p({arg:r instanceof Uint8Array?H(r):r.toString(),stream:!0,...o}),...await ve([n],s,o.headers)});for await(let c of a.ndjson())yield je(c)}finally{i.clear()}}}function Fc(e){return{findPeer:Im(e),findProvs:Cm(e),get:Pm(e),provide:Bm(e),put:Tm(e)}}function _m(e){return async function*(r={}){yield*(await e.post("stats/bw",{signal:r.signal,searchParams:p(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function Vc(e){return{bitswap:fs(e),repo:Ds(e),bw:_m(e)}}function Dm(e){return async function(r={}){await(await e.post("shutdown",{signal:r.signal,searchParams:p(r),headers:r.headers})).text()}}function Um(e){return async function(r={}){let n=await e.post("swarm/addrs",{signal:r.signal,searchParams:p(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:ue(s),addrs:(o[s]??[]).map(i=>J(i))}))}}function Nm(e){return async function(r,n={}){let o=await e.post("swarm/connect",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function km(e){return async function(r,n={}){let o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:p({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function Rm(e){return async function(r={}){let n=await e.post("swarm/addrs/local",{signal:r.signal,searchParams:p(r),headers:r.headers}),{Strings:o}=await n.json();return(o??[]).map(s=>J(s))}}function Lm(e){return async function(r={}){return((await(await e.post("swarm/peers",{signal:r.signal,searchParams:p(r),headers:r.headers})).json()).Peers??[]).map(s=>({addr:J(s.Addr),peer:ue(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound",identify:s.Identify}))}}function Hc(e){return{addrs:Um(e),connect:Nm(e),disconnect:km(e),localAddrs:Rm(e),peers:Lm(e)}}function Om(e){return async function(r={}){let n=await e.post("version",{signal:r.signal,searchParams:p(r),headers:r.headers});return{...W(await n.json()),"ipfs-http-client":"1.0.0"}}}var jc=class{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(t){let r=new bs(t),n={name:Be.name,code:Be.code,encode:a=>a,decode:a=>a},o=Object.values(Ht);(t.ipld?.bases??[]).forEach(a=>o.push(a)),this.bases=new Es({bases:o,loadBase:t.ipld?.loadBase});let s=Object.values(mf);[Hi,Ao,Ki,Qi,n].concat(t.ipld?.codecs??[]).forEach(a=>{s.push(a)}),this.codecs=new Ss({codecs:s,loadCodec:t.ipld?.loadCodec});let i=Object.values(hf);(t.ipld?.hashers??[]).forEach(a=>i.push(a)),this.hashers=new As({hashers:i,loadHasher:t.ipld?.loadHasher}),this.bitswap=lc(r),this.block=dc(r),this.bootstrap=pc(r),this.config=hc(r),this.dag=gc(r,this.codecs),this.dht=bc(r),this.diag=Ec(r),this.files=Ac(r),this.key=vc(r),this.log=kc(r),this.name=Rc(r),this.object=Lc(r,this.codecs),this.pin=Oc(r),this.pubsub=Kc(r),this.refs=$c(r),this.repo=Mc(r),this.routing=Fc(r),this.stats=Vc(r),this.swarm=Hc(r),this.add=Ol(r),this.addAll=ko(r),this.cat=wp(r),this.get=Gp(r),this.ls=Oh(r),this.id=ds(r),this.version=Om(r),this.stop=Dm(r),this.ping=pm(r),this.resolve=vm(r),this.commands=xp(r),this.mount=Kh(r),this.isOnline=Wp(r),this.getEndpointConfig=zp(r)}};function Km(e){return new jc(e)}function G1(e={}){return(typeof e=="string"||zt(e)||e instanceof URL)&&(e={url:e}),Km(e)}function W1(e,t){return{path:decodeURIComponent(new URL(e).pathname.split("/").pop()??""),content:$m(e,t)}}async function*$m(e,t){yield*(await et.get(e,t)).iterator()}return qm(Z1);})();
/*! Bundled license information:

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/utils.js:
@noble/curves/abstract/modular.js:
@noble/curves/abstract/curve.js:
@noble/curves/abstract/edwards.js:
@noble/curves/ed25519.js:
@noble/curves/abstract/weierstrass.js:
@noble/curves/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return KuboRpcClient}));
//# sourceMappingURL=index.min.js.map
